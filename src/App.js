import React, { useState, useMemo, useEffect, useRef } from 'react';
import { Sparkles, Calculator, Target, Users, Store, ArrowRight, CheckCircle, MessageCircle, Share2, Copy, MapPin, UserX, UserCheck, Zap, HelpCircle, AlertTriangle, Building2, Phone, Dumbbell, Crown, UsersRound, CreditCard, RefreshCw, Clock, Image as ImageIcon, Sun, Moon, Coffee, Calendar, ChevronLeft, ChevronRight, Bot, Send, Video, Camera, Instagram, Film, Tag, X, MessageSquare, Table, Music, Loader2 } from 'lucide-react';

// --- Gemini API Configuration ---
const apiKey = ""; // è¿è¡Œç¯å¢ƒä¼šè‡ªåŠ¨æ³¨å…¥ API Key

// é€šç”¨ API è°ƒç”¨å‡½æ•°
const callGemini = async (prompt, jsonMode = false) => {
  try {
    const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
    const payload = {
      contents: [{ parts: [{ text: prompt }] }]
    };
    
    if (jsonMode) {
      payload.generationConfig = { responseMimeType: "application/json" };
    }

    const response = await fetch(url, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });

    if (!response.ok) throw new Error(`API Error: ${response.status}`);
    
    const data = await response.json();
    const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
    
    if (!text) throw new Error("No response text");
    
    return jsonMode ? JSON.parse(text) : text;
  } catch (error) {
    console.error("Gemini API Call Failed:", error);
    return null;
  }
};

// --- æ•°æ®æºï¼šä¸­å›½è¡Œæ”¿åŒºåˆ’ (å¤§å¹…æ‰©å……ç‰ˆ) ---
const CHINA_REGIONS = {
  "åŒ—äº¬å¸‚": { "åŒ—äº¬å¸‚": ["æœé˜³åŒº", "æµ·æ·€åŒº", "è¥¿åŸåŒº", "ä¸œåŸåŒº", "ä¸°å°åŒº", "çŸ³æ™¯å±±åŒº", "é—¨å¤´æ²ŸåŒº", "æˆ¿å±±åŒº", "é€šå·åŒº", "é¡ºä¹‰åŒº", "æ˜Œå¹³åŒº", "å¤§å…´åŒº", "æ€€æŸ”åŒº", "å¹³è°·åŒº", "å¯†äº‘åŒº", "å»¶åº†åŒº"] },
  "ä¸Šæµ·å¸‚": { "ä¸Šæµ·å¸‚": ["æµ¦ä¸œæ–°åŒº", "é»„æµ¦åŒº", "å¾æ±‡åŒº", "é•¿å®åŒº", "é™å®‰åŒº", "æ™®é™€åŒº", "è™¹å£åŒº", "æ¨æµ¦åŒº", "é—µè¡ŒåŒº", "å®å±±åŒº", "å˜‰å®šåŒº", "é‡‘å±±åŒº", "æ¾æ±ŸåŒº", "é’æµ¦åŒº", "å¥‰è´¤åŒº", "å´‡æ˜åŒº"] },
  "å¹¿ä¸œçœ": { 
    "æ·±åœ³å¸‚": ["ç¦ç”°åŒº", "ç½—æ¹–åŒº", "å—å±±åŒº", "ç›ç”°åŒº", "å®å®‰åŒº", "é¾™å²—åŒº", "é¾™ååŒº", "åªå±±åŒº", "å…‰æ˜åŒº"], 
    "å¹¿å·å¸‚": ["å¤©æ²³åŒº", "è¶Šç§€åŒº", "æµ·ç åŒº", "è”æ¹¾åŒº", "ç™½äº‘åŒº", "é»„åŸ”åŒº", "ç•ªç¦ºåŒº", "èŠ±éƒ½åŒº", "å—æ²™åŒº", "ä»åŒ–åŒº", "å¢åŸåŒº"], 
    "ä¸œèå¸‚": ["ä¸œåŸè¡—é“", "å—åŸè¡—é“", "ä¸‡æ±Ÿè¡—é“", "èåŸè¡—é“", "æ¾å±±æ¹–", "é•¿å®‰é•‡", "è™é—¨é•‡", "å¸¸å¹³é•‡"], 
    "ä½›å±±å¸‚": ["ç¦…åŸåŒº", "å—æµ·åŒº", "é¡ºå¾·åŒº", "é«˜æ˜åŒº", "ä¸‰æ°´åŒº"],
    "ç æµ·å¸‚": ["é¦™æ´²åŒº", "æ–—é—¨åŒº", "é‡‘æ¹¾åŒº"],
    "æƒ å·å¸‚": ["æƒ åŸåŒº", "æƒ é˜³åŒº", "åšç½—å¿", "æƒ ä¸œå¿", "é¾™é—¨å¿"],
    "ä¸­å±±å¸‚": ["çŸ³å²è¡—é“", "ä¸œåŒºè¡—é“", "è¥¿åŒºè¡—é“", "å—åŒºè¡—é“", "äº”æ¡‚å±±è¡—é“", "å°æ¦„é•‡"]
  },
  "æµ™æ±Ÿçœ": { "æ­å·å¸‚": ["ä¸ŠåŸåŒº", "æ‹±å¢…åŒº", "è¥¿æ¹–åŒº", "æ»¨æ±ŸåŒº", "è§å±±åŒº", "ä½™æ­åŒº", "ä¸´å¹³åŒº", "é’±å¡˜åŒº", "å¯Œé˜³åŒº", "ä¸´å®‰åŒº"], "å®æ³¢å¸‚": ["æµ·æ›™åŒº", "æ±ŸåŒ—åŒº", "åŒ—ä»‘åŒº", "é•‡æµ·åŒº", "é„å·åŒº", "å¥‰åŒ–åŒº"], "æ¸©å·å¸‚": ["é¹¿åŸåŒº", "é¾™æ¹¾åŒº", "ç“¯æµ·åŒº", "æ´å¤´åŒº"], "å˜‰å…´å¸‚": ["å—æ¹–åŒº", "ç§€æ´²åŒº"], "æ¹–å·å¸‚": ["å´å…´åŒº", "å—æµ”åŒº"], "ç»å…´å¸‚": ["è¶ŠåŸåŒº", "æŸ¯æ¡¥åŒº", "ä¸Šè™åŒº"], "é‡‘åå¸‚": ["å©ºåŸåŒº", "é‡‘ä¸œåŒº"] },
  "æ±Ÿè‹çœ": { "å—äº¬å¸‚": ["ç„æ­¦åŒº", "ç§¦æ·®åŒº", "å»ºé‚ºåŒº", "é¼“æ¥¼åŒº", "æµ¦å£åŒº", "æ –éœåŒº", "é›¨èŠ±å°åŒº", "æ±Ÿå®åŒº", "å…­åˆåŒº", "æº§æ°´åŒº", "é«˜æ·³åŒº"], "è‹å·å¸‚": ["å§‘è‹åŒº", "è™ä¸˜åŒº", "å´ä¸­åŒº", "ç›¸åŸåŒº", "å´æ±ŸåŒº", "æ˜†å±±å¸‚", "å¸¸ç†Ÿå¸‚"], "æ— é”¡å¸‚": ["æ¢æºªåŒº", "æ»¨æ¹–åŒº", "æƒ å±±åŒº", "é”¡å±±åŒº", "æ–°å´åŒº"], "å¸¸å·å¸‚": ["å¤©å®åŒº", "é’Ÿæ¥¼åŒº", "æ–°åŒ—åŒº", "æ­¦è¿›åŒº", "é‡‘å›åŒº"], "å—é€šå¸‚": ["å´‡å·åŒº", "é€šå·åŒº", "æµ·é—¨åŒº"], "å¾å·å¸‚": ["é¼“æ¥¼åŒº", "äº‘é¾™åŒº", "è´¾æ±ªåŒº", "æ³‰å±±åŒº", "é“œå±±åŒº"] },
  "å››å·çœ": { "æˆéƒ½å¸‚": ["é”¦æ±ŸåŒº", "é’ç¾ŠåŒº", "é‡‘ç‰›åŒº", "æ­¦ä¾¯åŒº", "æˆååŒº", "é¾™æ³‰é©¿åŒº", "é’ç™½æ±ŸåŒº", "æ–°éƒ½åŒº", "æ¸©æ±ŸåŒº", "åŒæµåŒº", "éƒ«éƒ½åŒº"], "ç»µé˜³å¸‚": ["æ¶ªåŸåŒº", "æ¸¸ä»™åŒº", "å®‰å·åŒº"] },
  "æ¹–åŒ—çœ": { "æ­¦æ±‰å¸‚": ["æ±Ÿå²¸åŒº", "æ±Ÿæ±‰åŒº", "ç¡šå£åŒº", "æ±‰é˜³åŒº", "æ­¦æ˜ŒåŒº", "é’å±±åŒº", "æ´ªå±±åŒº", "ä¸œè¥¿æ¹–åŒº", "æ±‰å—åŒº", "è”¡ç”¸åŒº", "æ±Ÿå¤åŒº", "é»„é™‚åŒº", "æ–°æ´²åŒº"], "å®œæ˜Œå¸‚": ["è¥¿é™µåŒº", "ä¼å®¶å²—åŒº", "ç‚¹å†›åŒº", "çŒ‡äº­åŒº", "å¤·é™µåŒº"], "è¥„é˜³å¸‚": ["è¥„åŸåŒº", "æ¨ŠåŸåŒº", "è¥„å·åŒº"] },
  "æ¹–å—çœ": { "é•¿æ²™å¸‚": ["èŠ™è“‰åŒº", "å¤©å¿ƒåŒº", "å²³éº“åŒº", "å¼€ç¦åŒº", "é›¨èŠ±åŒº", "æœ›åŸåŒº", "é•¿æ²™å¿", "æµé˜³å¸‚", "å®ä¹¡å¸‚"], "æ ªæ´²å¸‚": ["è·å¡˜åŒº", "èŠ¦æ·åŒº", "çŸ³å³°åŒº", "å¤©å…ƒåŒº"], "æ¹˜æ½­å¸‚": ["é›¨æ¹–åŒº", "å²³å¡˜åŒº"] },
  "å±±ä¸œçœ": { "æµå—å¸‚": ["å†ä¸‹åŒº", "å¸‚ä¸­åŒº", "æ§è«åŒº", "å¤©æ¡¥åŒº", "å†åŸåŒº", "é•¿æ¸…åŒº", "ç« ä¸˜åŒº", "æµé˜³åŒº", "è±èŠœåŒº", "é’¢åŸåŒº"], "é’å²›å¸‚": ["å¸‚å—åŒº", "å¸‚åŒ—åŒº", "é»„å²›åŒº", "å´‚å±±åŒº", "ææ²§åŒº", "åŸé˜³åŒº", "å³å¢¨åŒº"], "çƒŸå°å¸‚": ["èŠç½˜åŒº", "ç¦å±±åŒº", "ç‰Ÿå¹³åŒº", "è±å±±åŒº"], "æ½åŠå¸‚": ["æ½åŸåŒº", "å¯’äº­åŒº", "åŠå­åŒº", "å¥æ–‡åŒº"] },
  "ç¦å»ºçœ": { "ç¦å·å¸‚": ["é¼“æ¥¼åŒº", "å°æ±ŸåŒº", "ä»“å±±åŒº", "é©¬å°¾åŒº", "æ™‹å®‰åŒº", "é•¿ä¹åŒº"], "å¦é—¨å¸‚": ["æ€æ˜åŒº", "æµ·æ²§åŒº", "æ¹–é‡ŒåŒº", "é›†ç¾åŒº", "åŒå®‰åŒº", "ç¿”å®‰åŒº"], "æ³‰å·å¸‚": ["é²¤åŸåŒº", "ä¸°æ³½åŒº", "æ´›æ±ŸåŒº", "æ³‰æ¸¯åŒº"] },
  "å®‰å¾½çœ": { "åˆè‚¥å¸‚": ["ç‘¶æµ·åŒº", "åºé˜³åŒº", "èœ€å±±åŒº", "åŒ…æ²³åŒº"], "èŠœæ¹–å¸‚": ["é•œæ¹–åŒº", "é¸ æ±ŸåŒº", "å¼‹æ±ŸåŒº", "æ¹¾æ²šåŒº", "ç¹æ˜ŒåŒº"] },
  "é™•è¥¿çœ": { "è¥¿å®‰å¸‚": ["æ–°åŸåŒº", "ç¢‘æ—åŒº", "è²æ¹–åŒº", "çæ¡¥åŒº", "æœªå¤®åŒº", "é›å¡”åŒº", "é˜è‰¯åŒº", "ä¸´æ½¼åŒº", "é•¿å®‰åŒº", "é«˜é™µåŒº", "é„ é‚‘åŒº"], "å®é¸¡å¸‚": ["æ¸­æ»¨åŒº", "é‡‘å°åŒº", "é™ˆä»“åŒº"] },
  "æ²³åŒ—çœ": { "çŸ³å®¶åº„å¸‚": ["é•¿å®‰åŒº", "æ¡¥è¥¿åŒº", "æ–°ååŒº", "äº•é™‰çŸ¿åŒº", "è£•ååŒº", "è—åŸåŒº", "é¹¿æ³‰åŒº", "æ ¾åŸåŒº"], "å”å±±å¸‚": ["è·¯å—åŒº", "è·¯åŒ—åŒº", "å¤å†¶åŒº", "å¼€å¹³åŒº", "ä¸°å—åŒº", "ä¸°æ¶¦åŒº", "æ›¹å¦ƒç”¸åŒº"] },
  "å±±è¥¿çœ": { "å¤ªåŸå¸‚": ["å°åº—åŒº", "è¿æ³½åŒº", "æèŠ±å²­åŒº", "å°–è‰åªåŒº", "ä¸‡æŸæ—åŒº", "æ™‹æºåŒº"] },
  "è¾½å®çœ": { "æ²ˆé˜³å¸‚": ["å’Œå¹³åŒº", "æ²ˆæ²³åŒº", "å¤§ä¸œåŒº", "çš‡å§‘åŒº", "é“è¥¿åŒº", "è‹å®¶å±¯åŒº", "æµ‘å—åŒº", "æ²ˆåŒ—æ–°åŒº", "äºæ´ªåŒº", "è¾½ä¸­åŒº"], "å¤§è¿å¸‚": ["ä¸­å±±åŒº", "è¥¿å²—åŒº", "æ²™æ²³å£åŒº", "ç”˜äº•å­åŒº", "æ—…é¡ºå£åŒº", "é‡‘å·åŒº", "æ™®å…°åº—åŒº"] },
  "å‰æ—çœ": { "é•¿æ˜¥å¸‚": ["å—å…³åŒº", "å®½åŸåŒº", "æœé˜³åŒº", "äºŒé“åŒº", "ç»¿å›­åŒº", "åŒé˜³åŒº", "ä¹å°åŒº"] },
  "é»‘é¾™æ±Ÿçœ": { "å“ˆå°”æ»¨å¸‚": ["é“é‡ŒåŒº", "å—å²—åŒº", "é“å¤–åŒº", "å¹³æˆ¿åŒº", "æ¾åŒ—åŒº", "é¦™åŠåŒº", "å‘¼å…°åŒº", "é˜¿åŸåŒº", "åŒåŸåŒº"] },
  "æ±Ÿè¥¿çœ": { "å—æ˜Œå¸‚": ["ä¸œæ¹–åŒº", "è¥¿æ¹–åŒº", "é’äº‘è°±åŒº", "æ¹¾é‡Œç®¡ç†å±€", "é’å±±æ¹–åŒº", "æ–°å»ºåŒº"] },
  "æ²³å—çœ": { "éƒ‘å·å¸‚": ["ä¸­åŸåŒº", "äºŒä¸ƒåŒº", "ç®¡åŸå›æ—åŒº", "é‡‘æ°´åŒº", "ä¸Šè¡—åŒº", "æƒ æµåŒº"], "æ´›é˜³å¸‚": ["è€åŸåŒº", "è¥¿å·¥åŒº", "ç€æ²³å›æ—åŒº", "æ¶§è¥¿åŒº", "åƒå¸ˆåŒº", "å­Ÿæ´¥åŒº", "æ´›é¾™åŒº"] },
  "æµ·å—çœ": { "æµ·å£å¸‚": ["ç§€è‹±åŒº", "é¾™ååŒº", "ç¼å±±åŒº", "ç¾å…°åŒº"], "ä¸‰äºšå¸‚": ["æµ·æ£ åŒº", "å‰é˜³åŒº", "å¤©æ¶¯åŒº", "å´–å·åŒº"] },
  "è´µå·çœ": { "è´µé˜³å¸‚": ["å—æ˜åŒº", "äº‘å²©åŒº", "èŠ±æºªåŒº", "ä¹Œå½“åŒº", "ç™½äº‘åŒº", "è§‚å±±æ¹–åŒº"] },
  "äº‘å—çœ": { "æ˜†æ˜å¸‚": ["äº”ååŒº", "ç›˜é¾™åŒº", "å®˜æ¸¡åŒº", "è¥¿å±±åŒº", "ä¸œå·åŒº", "å‘ˆè´¡åŒº", "æ™‹å®åŒº"] },
  "ç”˜è‚ƒçœ": { "å…°å·å¸‚": ["åŸå…³åŒº", "ä¸ƒé‡Œæ²³åŒº", "è¥¿å›ºåŒº", "å®‰å®åŒº", "çº¢å¤åŒº"] },
  "é’æµ·çœ": { "è¥¿å®å¸‚": ["åŸä¸œåŒº", "åŸä¸­åŒº", "åŸè¥¿åŒº", "åŸåŒ—åŒº", "æ¹Ÿä¸­åŒº"] },
  "å¹¿è¥¿å£®æ—è‡ªæ²»åŒº": { "å—å®å¸‚": ["å…´å®åŒº", "é’ç§€åŒº", "æ±Ÿå—åŒº", "è¥¿ä¹¡å¡˜åŒº", "è‰¯åº†åŒº", "é‚•å®åŒº", "æ­¦é¸£åŒº"], "æ¡‚æ—å¸‚": ["ç§€å³°åŒº", "å å½©åŒº", "è±¡å±±åŒº", "ä¸ƒæ˜ŸåŒº", "é›å±±åŒº", "ä¸´æ¡‚åŒº"] },
  "å†…è’™å¤è‡ªæ²»åŒº": { "å‘¼å’Œæµ©ç‰¹å¸‚": ["æ–°åŸåŒº", "å›æ°‘åŒº", "ç‰æ³‰åŒº", "èµ›ç½•åŒº"] },
  "å®å¤å›æ—è‡ªæ²»åŒº": { "é“¶å·å¸‚": ["å…´åº†åŒº", "é‡‘å‡¤åŒº", "è¥¿å¤åŒº"] },
  "æ–°ç–†ç»´å¾å°”è‡ªæ²»åŒº": { "ä¹Œé²æœ¨é½å¸‚": ["å¤©å±±åŒº", "æ²™ä¾å·´å…‹åŒº", "æ–°å¸‚åŒº", "æ°´ç£¨æ²ŸåŒº", "å¤´å±¯æ²³åŒº", "è¾¾å‚åŸåŒº", "ç±³ä¸œåŒº"] },
  "å¤©æ´¥å¸‚": { "å¤©æ´¥å¸‚": ["å’Œå¹³åŒº", "æ²³ä¸œåŒº", "æ²³è¥¿åŒº", "å—å¼€åŒº", "æ²³åŒ—åŒº", "çº¢æ¡¥åŒº", "æ»¨æµ·æ–°åŒº"] },
  "é‡åº†å¸‚": { "é‡åº†å¸‚": ["æ¸ä¸­åŒº", "æ±ŸåŒ—åŒº", "å—å²¸åŒº", "ä¹é¾™å¡åŒº", "æ²™åªååŒº", "å¤§æ¸¡å£åŒº", "åŒ—ç¢šåŒº", "æ¸åŒ—åŒº", "å·´å—åŒº"] }
};


const STORE_TYPE_OPTIONS = [
  { id: 'mall', label: 'å•†åœºé¦†', desc: 'é«˜æ›å…‰' },
  { id: 'office', label: 'å†™å­—æ¥¼', desc: 'ç™½é¢†å¤š' },
  { id: 'community', label: 'ç¤¾åŒºåº—', desc: 'åšé•¿æœŸ' },
  { id: 'studio', label: 'å·¥ä½œå®¤', desc: 'é«˜å®¢å•' }
];

const PAIN_POINTS_OPTIONS = [
  "ä¸¥é‡ç¼ºæ–°å®¢", "è€å®¢æ­»å¾—å¿«", "ä½“éªŒè½¬ä¸åŠ¨", "å¤§è¯¾æ²¡äººä¸Š", "ç§æ•™å–ä¸å‡º",
  "å¡é¡¹ä¸èµšé’±", "æ•™ç»ƒä¸ä¼šé”€", "ç¾å›¢æ²¡äººç†", "æˆ¿ç§Ÿå‹åŠ›å¤§", "æ·¡å­£ç©ºè¡è¡"
];

const PRESET_QA_TAGS = ["æ–°åº—å¦‚ä½•å¼•æµï¼Ÿ", "è€ä¼šå‘˜ä¸ç»­è´¹ï¼Ÿ", "ç§æ•™è¯¾æ€ä¹ˆå–ï¼Ÿ", "æ•™ç»ƒå›¢é˜Ÿç®¡ç†ï¼Ÿ", "æ·¡å­£ä¸šç»©ä¸‹æ»‘ï¼Ÿ"];

const PRICE_RANGE_OPTIONS = [
  { id: 'low', label: '2000å…ƒä»¥å†…', avg: 1500 },
  { id: 'mid', label: '2000-5000å…ƒ', avg: 3500 },
  { id: 'high', label: '5000-10000å…ƒ', avg: 7500 },
  { id: 'vip', label: '10000å…ƒä»¥ä¸Š', avg: 15000 },
];


// --- ç­–ç•¥åº“ (Week Day Logic) ---
const WEEKLY_THEMES = [
  { day: 'å‘¨æ—¥', theme: 'å¤ç›˜ä¸è§„åˆ’', mood: 'Relaxed' },
  { day: 'å‘¨ä¸€', theme: 'èƒ½é‡å”¤é†’', mood: 'Energetic' },
  { day: 'å‘¨äºŒ', theme: 'å¹²è´§çŸ¥è¯†', mood: 'Professional' },
  { day: 'å‘¨ä¸‰', theme: 'ä¼šå‘˜æ¡ˆä¾‹', mood: 'Trust' },
  { day: 'å‘¨å››', theme: 'æƒ…ç»ªè§£å‹', mood: 'Healing' },
  { day: 'å‘¨äº”', theme: 'å‘¨æœ«é¢„å‘Š', mood: 'Exciting' },
  { day: 'å‘¨å…­', theme: 'ç”Ÿæ´»æ–¹å¼', mood: 'Lifestyle' },
];

// æ ¸å¿ƒï¼šæ ¹æ®æ—¥æœŸå’Œé—¨åº—ç±»å‹ç”Ÿæˆç‰¹å®šå†…å®¹
const getDailyContent = (storeType, shopName, location, date) => {
  const dayIndex = date.getDay(); 
  const themeInfo = WEEKLY_THEMES[dayIndex];
  const dateStr = `${date.getMonth() + 1}æœˆ${date.getDate()}æ—¥`;

  // 1. æœ‹å‹åœˆå†…å®¹ (æ¯æ—¥3æ¡ - æ¨¡æ¿æ•°æ®)
  const momentsTemplates = {
    mall: [
      { m: { t: "å‘¨æœ«æ…¢æ™¨", c: `æ—©å®‰ï¼${dateStr}ã€‚å•†åœºè¿˜æ²¡å¼€é—¨ï¼Œæˆ‘ä»¬å·²åœ¨ç­‰å€™ã€‚\næ™¨å…‰æ´’åœ¨å«å­ä¸Šï¼Œæ˜¯å‘¨æœ«æœ€æƒ¬æ„çš„å¼€å§‹ã€‚\n#${shopName} #æ…¢ç”Ÿæ´»`, i: "é˜³å…‰æ´’åœ¨ç‘œä¼½å«" }, a: { t: "é€›è¡—æ­‡è„š", c: `é€›ç´¯äº†ï¼Ÿ${shopName}å°±åœ¨3æ¥¼ï¼Œéšæ—¶æ¬¢è¿ã€‚\nè¿›æ¥åšä¸ª30åˆ†é’Ÿæ‹‰ä¼¸ï¼Œæ¯”å–å¥¶èŒ¶æ›´è§£ä¹ï¼\nğŸ‘‡ å‡­å°ç¥¨å…è´¹ä½“éªŒä¸€æ¬¡ï¼`, i: "èˆ’é€‚ä¼‘æ¯åŒº" }, e: { t: "æ”¶å¿ƒæ—¶åˆ»", c: `å‘¨æœ«æ„‰å¿«ç»“æŸã€‚åšä¸ªå†¥æƒ³æ•´ç†å¿ƒæƒ…ã€‚\n${location}çš„å¤œæ™¯å¾ˆç¾ï¼Œæ™šå®‰ã€‚\n#æ”¶å¿ƒ #æ–°çš„ä¸€å‘¨`, i: "å†¥æƒ³èƒŒå½±" } },
      // ... (æ­¤å¤„çœç•¥éƒ¨åˆ†å¤©æ•°ï¼Œä»£ç è¿è¡Œæ—¶ä¼šè‡ªåŠ¨å¾ªç¯)
      { m: { t: "å…ƒæ°”å‘¨ä¸€", c: `æ—©å®‰ï¼æ–°çš„ä¸€å‘¨ï¼Œæ‹’ç»Monday Blueï¼\nç”¨ä¸€ç»„æ‹œæ—¥å¼å¼€å¯é«˜èƒ½é‡çŠ¶æ€ã€‚\n#${shopName} #å…ƒæ°”æ»¡æ»¡`, i: "é«˜éš¾åº¦ä½“å¼å‰ªå½±" }, a: { t: "åˆé—´å……ç”µ", c: `åˆä¼‘æ—¶é—´ï¼Œåˆ«è¶´ç€ç¡äº†ï¼Œæ¥æ‹‰ä¼¸è„ŠæŸ±ã€‚\nå……ç”µ20åˆ†é’Ÿï¼Œä¸‹åˆå·¥ä½œæ›´æœ‰åŠ²ï¼\n#åˆä¼‘å»å“ªå„¿`, i: "è„ŠæŸ±æ‰­è½¬ä½“å¼" }, e: { t: "æ™šé—´æš´æ±—", c: `å‘¨ä¸€å¾ˆå¿™ï¼Ÿé‚£å°±ç”¨æ±—æ°´ç”©æ‰å‹åŠ›ï¼\næ ¸å¿ƒè¯¾å‡†å¤‡å¼€å§‹ï¼Œç­‰ä½ æ¥æˆ˜ã€‚\n#ç‡ƒè„‚ #è§£å‹`, i: "å¤§æ±—æ·‹æ¼“ç‰¹å†™" } },
      { m: { t: "å»æ°´è‚¿", c: `æ—©å®‰ã€‚è„¸éƒ¨æµ®è‚¿ï¼Ÿæ™¨ç»ƒæ˜¯æœ€å¥½çš„æ¶ˆè‚¿ç¥å™¨ã€‚\nç»ƒå®Œè‡ªå¸¦é«˜å…‰ï¼Œç´ é¢œä¹Ÿè‡ªä¿¡ï¼\n#${shopName} #æ—©ç»ƒ`, i: "é¢éƒ¨ç‰¹å†™/å¥½æ°”è‰²" }, a: { t: "ä½“æ€å¹²è´§", c: `ç©¿è¡£ä¸å¥½çœ‹ï¼Ÿå¯èƒ½æ˜¯åœ†è‚©æƒ¹çš„ç¥¸ã€‚\næ•™ä½ ä¸€ä¸ªåŠ¨ä½œå¼€è‚©ï¼Œç§’å˜ç›´è§’è‚©ï¼\n(åŠ¨ä½œè§è¯„è®ºåŒº)`, i: "å¼€è‚©åŠ¨ä½œç¤ºèŒƒ" }, e: { t: "æ·±å¤œè¯¾å ‚", c: `æ¯”ä½ ç¾çš„äººè¿˜åœ¨åŠªåŠ›ï¼Œä½ æœ‰ä»€ä¹ˆç†ç”±å·æ‡’ï¼Ÿ\næ˜æ™šè¯¾ç¨‹å·²å‡ºï¼Œæ‰‹æ…¢æ— ï¼\n#è‡ªå¾‹ #æ™šå®‰`, i: "æ»¡å‘˜æ•™å®¤" } },
      { m: { t: "åšæŒæ‰“å¡", c: `æ—©å®‰ï¼ä»Šå¤©æ˜¯æœ¬å‘¨çš„è½¬æŠ˜ç‚¹ã€‚\nåšæŒç»ƒä¹ ï¼Œèº«ä½“ä¼šç»™ä½ æœ€å¥½çš„åé¦ˆã€‚\n#${shopName} #åšæŒ`, i: "æ‰“å¡ç­¾åˆ°è¡¨" }, a: { t: "ä¼šå‘˜æ•…äº‹", c: `æ­å–œä¼šå‘˜æå°å§ï¼åšæŒ3ä¸ªæœˆèƒŒè–„äº†ä¸€å¯¸ï¼\nè¿™å°±æ˜¯ç‘œä¼½çš„é­…åŠ›ï¼ŒçœŸå®å¯è§ã€‚\n#ä¼šå‘˜èœ•å˜ #çœŸå®åé¦ˆ`, i: "èº«æå¯¹æ¯”å›¾(æ‰“ç )" }, e: { t: "ç¡å‰æ‹‰ä¼¸", c: `å¿™äº†ä¸€å¤©è¾›è‹¦äº†ã€‚ç¡å‰åšä¸ªå©´å„¿å¼ã€‚\næ”¾æ¾è…°èƒŒï¼Œä»Šæ™šåšä¸ªå¥½æ¢¦ã€‚\n#æ™šå®‰ #åŠ©çœ `, i: "å©´å„¿å¼ä½“å¼" } },
      { m: { t: "æ¸©æŸ”å”¤é†’", c: `æ—©å®‰ã€‚ä¸éœ€è¦å¤ªç”¨åŠ›ï¼Œæ¸©æŸ”åœ°ä¼¸å±•ã€‚\næ„Ÿå—å‘¼å¸çš„æµåŠ¨ï¼Œå”¤é†’èº«ä½“ã€‚\n#${shopName} #æµç‘œä¼½`, i: "æµåŠ¨ç‘œä¼½ç”»é¢" }, a: { t: "ä¸‹åˆèŒ¶", c: `ç»ƒå®Œç‘œä¼½å–æ¯èŒ¶ï¼Œ${location}æœ€æƒ¬æ„çš„è§’è½ã€‚\nç•™ç»™æœ€æ‡‚ç”Ÿæ´»çš„ä½ ã€‚\n#ä¸‹åˆèŒ¶ #ç²¾è‡´ç”Ÿæ´»`, i: "ç²¾è‡´èŒ¶æ­‡" }, e: { t: "æƒ…ç»ªç–—æ„ˆ", c: `ä¸ä»…æ˜¯ä¿®èº«ï¼Œæ›´æ˜¯ä¿®å¿ƒã€‚\næ”¾ä¸‹ç„¦è™‘ï¼Œæ‰¾å›å†…å¿ƒçš„å¹³é™ã€‚\n#é¢‚é’µ #ç–—æ„ˆ`, i: "é¢‚é’µ/é¦™è–°" } },
      { m: { t: "å‘¨äº”å¿«ä¹", c: `æ—©å®‰ï¼å‘¨äº”çš„ç©ºæ°”éƒ½æ˜¯ç”œçš„ã€‚\nç«™å¥½æœ€åä¸€ç­å²—ï¼Œæ™šä¸Šæ¥é¦†é‡Œç‹‚æ¬¢ï¼\n#${shopName} #å‘¨äº”`, i: "å¼€å¿ƒçš„åˆå½±" }, a: { t: "å‘¨æœ«é¢„å‘Š", c: `æœ¬å‘¨æœ«å¼€æ”¾æ—¥ï¼0å…ƒä½“éªŒç©ºä¸­ç‘œä¼½ã€‚\nåé¢æœ‰é™ï¼Œæƒ³é£çš„å§å¦¹æŠ“ç´§ï¼\nğŸ‘‡ æ‰«ç å ä½`, i: "ç©ºä¸­ç‘œä¼½ç¾å›¾" }, e: { t: "ä¸‹ç­è§£å‹", c: `ä¸‹ç­å•¦ï¼æŠŠçƒ¦æ¼ç•™åœ¨é—¨å¤–ï¼ŒæŠŠå¿«ä¹å¸¦å›å®¶ã€‚\nå‘¨æœ«æ„‰å¿«ï¼Œå„ä½ä¼½äººï¼\n#å‘¨æœ« #æ”¾æ¾`, i: "ä¸¾æ‰‹æ¬¢å‘¼" } },
      { m: { t: "å‘¨æœ«æ™¨ç»ƒ", c: `æ—©å®‰ï¼å‘¨æœ«ä¸ç¡æ‡’è§‰çš„äººï¼Œéƒ½æ‹¥æœ‰å¼€æŒ‚äººç”Ÿã€‚\nä¸ºè‡ªå¾‹çš„ä½ ç‚¹èµï¼\n#${shopName} #æ™¨ç»ƒ`, i: "æ™¨ç»ƒå¤§è¯¾" }, a: { t: "é—ºèœœçº¦ä¼š", c: `å‘¨æœ«çº¦ä¼šå»å“ªï¼Ÿå¸¦é—ºèœœæ¥${shopName}ã€‚\näº’æ‹ç¾ç…§ï¼Œä¸€èµ·å˜ç¾ï¼\n#é—ºèœœ #å‘¨æœ«å¥½å»å¤„`, i: "åŒäººç‘œä¼½" }, e: { t: "æ™šå®‰", c: `å¤œæ·±äº†ï¼Œæ„¿ä½ æœ‰ä¸ªå¥½æ¢¦ã€‚\næ˜å¤©ç»§ç»­ç²¾å½©ï¼Œæ™šå®‰ã€‚\n#${location} #æ™šå®‰`, i: "åŸå¸‚å¤œæ™¯" } }
    ],
    office: [
      { m: { t: "å‘¨æ—¥å¤ç›˜", c: "æ•´ç†å¥½å¿ƒæƒ…ï¼Œä¸‹å‘¨ç»§ç»­æˆ˜æ–—ï¼\nç‘œä¼½æ˜¯æ‰“å·¥äººçš„å›è¡€åŒ…ã€‚\n#${shopName} #å›è¡€", i: "æ‰‹è´¦æœ¬+ç‘œä¼½å«" }, a: { t: "é¢„çº¦æé†’", c: "ä¸‹å‘¨ä¸­åˆçš„è‚©é¢ˆè¯¾å¿«æ»¡å‘˜äº†ï¼\næ‰‹æ…¢æ— ï¼Œèµ¶ç´§å»å°ç¨‹åºçº¦è¯¾ã€‚\n#çº¦è¯¾", i: "è¯¾è¡¨æˆªå›¾" }, e: { t: "æ™šå®‰", c: "ç¡ä¸ªå¥½è§‰ï¼Œæ˜å¤©åˆæ˜¯æ–°çš„ä¸€å¤©ã€‚\næˆ‘ä»¬åœ¨æ¥¼ä¸‹ç­‰ä½ ã€‚\n#æ™šå®‰", i: "é™è°§å¤œæ™¯" } },
      { m: { t: "å‘¨ä¸€æˆ˜è¢", c: "ç©¿ä¸Šç‘œä¼½æœï¼ŒåšèŒåœºæœ€é£’çš„ä½ ï¼\nå¸¦ç€èƒ½é‡å»å¼€ä¼šã€‚\n#${shopName} #èŒåœºç©¿æ­", i: "å¯¹é•œè‡ªæ‹" }, a: { t: "åˆä¼‘æ€¥æ•‘", c: "è¶´ç€ç¡=æ¯é¢ˆæ¤ï¼æ¥èººå¹³20åˆ†é’Ÿã€‚\nä¸‹åˆæ•ˆç‡ç¿»å€çš„ç§˜å¯†ã€‚\n#åˆä¼‘", i: "ä¼‘æ¯æœ¯" }, e: { t: "ä¸‹ç­å›è¡€", c: "æ´—å»ç­å‘³ï¼Œæ»¡è¡€å¤æ´»ï¼\næ²¡ä»€ä¹ˆæ˜¯ä¸€èŠ‚ç‘œä¼½è¯¾è§£å†³ä¸äº†çš„ã€‚\n#ä¸‹ç­", i: "æ·‹æµ´é—´" } },
      { m: { t: "æ—©å®‰æ‰“å·¥äºº", c: "å’–å•¡æ˜¯ç»­å‘½ï¼Œç‘œä¼½æ˜¯å…»å‘½ã€‚\næ—©èµ·åŠå°æ—¶ï¼ŒçŠ¶æ€å¥½ä¸€å¤©ã€‚\n#${shopName} #æ—©å®‰", i: "å’–å•¡+ç‘œä¼½ç –" }, a: { t: "å·¥ä½æ‹‰ä¼¸", c: "åç€ä¹Ÿèƒ½ç˜¦ï¼Ÿæ•™ä½ ä¸€æ‹›ã€‚\néšå½¢æ‹‰ä¼¸ï¼ŒåŠå…¬ä¸ç´¯ã€‚\n(åŠ¨ä½œè§å›¾)", i: "æ¤…å­ç‘œä¼½" }, e: { t: "åŠ ç­ä¼´ä¾£", c: "è¿˜åœ¨åŠ ç­ï¼Ÿè®°å¾—èµ·æ¥åŠ¨ä¸€åŠ¨ã€‚\nèº«ä½“æ˜¯é©å‘½çš„æœ¬é’±ã€‚\n#åŠ ç­ #å¥åº·", i: "åŠå…¬å®¤å¤œæ™¯" } },
      { m: { t: "å‘¨ä¸‰æ‰“å¡", c: "æœ¬å‘¨è¿‡åŠï¼ŒåšæŒä½ï¼\nç”¨æ±—æ°´å†²åˆ·ç–²æƒ«ã€‚\n#${shopName} #åŠ æ²¹", i: "åŠ æ²¹æ‰‹åŠ¿" }, a: { t: "åŒäº‹å›¢å»º", c: "ä¸å…¶èšé¤é•¿è‚‰ï¼Œä¸å¦‚å›¢å»ºæš´æ±—ï¼\n${shopName}ä¼ä¸šå›¢è¯¾å¼€æ”¾é¢„çº¦ã€‚\n#å›¢å»º", i: "å›¢é˜Ÿåˆå½±" }, e: { t: "è‚©é¢ˆç†ç–—", c: "ä½å¤´æ—çš„æ•‘æ˜Ÿæ¥äº†ï¼\næ‰‹æ³•æŒ‰æ‘©+æ‹‰ä¼¸ï¼Œé€šä½“èˆ’ç•…ã€‚\n#è‚©é¢ˆ", i: "æ‰‹æ³•æŒ‰æ‘©" } },
      { m: { t: "æ‹’ç»èŒä¸šç—…", c: "åˆ«è®©è…°é—´ç›˜çªå‡ºæ¯äº†ä½ çš„ç”Ÿæ´»ã€‚\né¢„é˜²å¤§äºæ²»ç–—ï¼Œç°åœ¨å°±å¼€å§‹ç»ƒã€‚\n#${shopName} #å¥åº·", i: "è„ŠæŸ±æ¨¡å‹" }, a: { t: "åˆé—´å†¥æƒ³", c: "å¤§è„‘æ­»æœºï¼Ÿé‡å¯ä¸€ä¸‹ï¼\n15åˆ†é’Ÿå†¥æƒ³ï¼Œæ‰¾å›ä¸“æ³¨åŠ›ã€‚\n#å†¥æƒ³", i: "é—­çœ¼å†¥æƒ³" }, e: { t: "é‡Šæ”¾å‹åŠ›", c: "æƒ³æ‰“è€æ¿ï¼Ÿæ¥æ‰“æ‹³å‡»ç‘œä¼½ï¼\né‡Šæ”¾å‹åŠ›ï¼Œåšå›è‡ªå·±ã€‚\n#è§£å‹", i: "åŠ›é‡æ„Ÿä½“å¼" } },
      { m: { t: "å‘¨äº”å¿«ä¹", c: "æœ€åä¸€å¤©ï¼Œå†²é¸­ï¼\nä»Šæ™šä¸‹ç­åˆ«èµ°ï¼Œé¦†é‡Œæœ‰æ´»åŠ¨ã€‚\n#${shopName} #å‘¨äº”", i: "æ´»åŠ›æ»¡æ»¡" }, a: { t: "å‘¨æœ«å»å“ª", c: "å‘¨æœ«ä¸åŠ ç­ï¼Œæ¥${shopName}åŠ ç»ƒï¼\nå‡­å·¥ç‰Œé¦–èŠ‚19.9å…ƒã€‚\n#å‘¨æœ«å»å“ªå„¿", i: "å‘¨æœ«æµ·æŠ¥" }, e: { t: "HappyHour", c: "ä¸‹ç­åçš„å¿«ä¹ï¼Œæ˜¯ç‘œä¼½ç»™çš„ã€‚\nç¥å¤§å®¶å‘¨æœ«æ„‰å¿«ï¼\n#å‘¨æœ«", i: "èšä¼š" } },
      { m: { t: "ç‹¬å¤„æ—¶å…‰", c: "å‘¨æœ«çš„åŠå…¬å®¤å¥½å®‰é™ï¼Œé€‚åˆç‹¬å¤„ã€‚\näº«å—ä¸€ä¸ªäººçš„ç‘œä¼½æ—¶å…‰ã€‚\n#${shopName} #ç‹¬å¤„", i: "ç©ºæ—·CBD" }, a: { t: "è‡ªæˆ‘æå‡", c: "åˆ«äººåœ¨åˆ·å‰§ï¼Œä½ åœ¨ç»ƒèƒŒã€‚\næ‹‰å¼€å·®è·çš„å°±åœ¨æ­¤åˆ»ã€‚\n#è‡ªå¾‹", i: "çœ‹ä¹¦+æ‹‰ä¼¸" }, e: { t: "å‡†å¤‡å¼€å·¥", c: "è°ƒæ•´çŠ¶æ€ï¼Œè¿æ¥å‘¨ä¸€ã€‚\næ™šå®‰ï¼Œæ‰“å·¥äººã€‚\n#æ™šå®‰", i: "æ•´ç†è£…å¤‡" } }
    ],
    community: [
      { m: { t: "äº²å­æ—¶å…‰", c: "å¸¦å¨ƒç»ƒç‘œä¼½ï¼Œé«˜è´¨é‡é™ªä¼´ï¼\nä½ æœ‰èº«æï¼Œå¨ƒæœ‰ç©ä¼´ã€‚\n#${shopName} #äº²å­", i: "æ¯å¥³åˆå½±" }, a: { t: "å‘¨æœ«æ”¾é£", c: "æŠŠå¨ƒäº¤ç»™çˆ¸çˆ¸ï¼Œç»™è‡ªå·±æ”¾ä¸ªå‡ã€‚\næ¥é¦†é‡Œäº«å—ç‰‡åˆ»å®é™ã€‚\n#å®å¦ˆæ—¶å…‰", i: "æ½‡æ´’èƒŒå½±" }, e: { t: "æ™šå®‰é‚»å±…", c: "æ—©ç‚¹ä¼‘æ¯ï¼Œæ˜å¤©è§ã€‚\nå°±åœ¨æ¥¼ä¸‹ï¼Œåˆ«è¿Ÿåˆ°å“¦ã€‚\n#æ™šå®‰", i: "å°åŒºå¤œæ™¯" } },
      { m: { t: "é€å®Œå¨ƒ", c: "ç¥å…½å½’ç¬¼ï¼Œå¦ˆå¦ˆçš„æ—¶é—´å¼€å§‹å•¦ï¼\næ—©è¯¾Cä½å·²ç•™å¥½ã€‚\n#${shopName} #å®å¦ˆ", i: "æ ¡é—¨å£" }, a: { t: "ä¹°èœé¡ºè·¯", c: "ä¹°å®Œèœé¡ºä¾¿ç»ƒä¸ªç‘œä¼½ï¼Œå¤ªæ–¹ä¾¿äº†ã€‚\nå°±åœ¨å°åŒºé—¨å£ï¼Œå‡ æ­¥è·¯å°±åˆ°ã€‚\n#æ–¹ä¾¿", i: "èœç¯®å­" }, e: { t: "ç¡å‰æ‹‰ä¼¸", c: "å¸¦å¨ƒä¸€å¤©ç´¯äº†å§ï¼Ÿæ‹‰ä¼¸ä¸€ä¸‹ã€‚\nç¼“è§£è…°é…¸èƒŒç—›ã€‚\n#äº§åä¿®å¤", i: "åºŠå¤´ç‘œä¼½" } },
      { m: { t: "é‚»é‡Œæ™¨ç»ƒ", c: "æ—©å®‰ï¼ç‹å§æå§éƒ½æ¥äº†ï¼Œå°±å·®ä½ äº†ã€‚\nç¤¾åŒºå§å¦¹æ·˜ï¼Œè¶Šç»ƒè¶Šå¹´è½»ã€‚\n#${shopName} #é‚»é‡Œ", i: "é‚»é‡ŒèŠå¤©" }, a: { t: "ä¸‹åˆèŒ¶", c: "ç»ƒå®ŒèŠèŠå¤©ï¼Œç¤¾åŒºæƒ…æŠ¥ç«™ã€‚\nä¸ä»…æ˜¯ç‘œä¼½ï¼Œæ›´æ˜¯ç”Ÿæ´»ã€‚\n#ä¸‹åˆèŒ¶", i: "èŒ¶æ°´é—´" }, e: { t: "æ”¹å–„ç¡çœ ", c: "å¤±çœ å¤šæ¢¦ï¼Ÿè¯•è¯•é˜´ç‘œä¼½ã€‚\nåŠ©ä½ ä¸€è§‰ç¡åˆ°å¤§å¤©äº®ã€‚\n#åŠ©çœ ", i: "åŠ©çœ é¦™è–°" } },
      { m: { t: "å¥åº·ç”Ÿæ´»", c: "æ—©èµ·ä¸€æ¯æ°´ï¼Œæ’æ¯’å…»é¢œã€‚\nåšæŒç»ƒä¹ ï¼Œæ°”è‰²çº¢æ¶¦ã€‚\n#${shopName} #å…»ç”Ÿ", i: "å–æ°´" }, a: { t: "ä½“æ€æ”¹é€ ", c: "çœ‹ï¼è¿™æ˜¯å¼ å§ç»ƒäº†3ä¸ªæœˆçš„æ•ˆæœã€‚\nçœŸå®æ¡ˆä¾‹ï¼Œå°±åœ¨ä½ èº«è¾¹ã€‚\n#å¯¹æ¯”å›¾", i: "å¯¹æ¯”å›¾" }, e: { t: "ç‘œä¼½é¥®é£Ÿ", c: "ä¸‰åˆ†ç»ƒä¸ƒåˆ†åƒï¼Œæ™šé¤è¿™æ ·åƒã€‚\nä¸æŒ¨é¥¿ä¹Ÿèƒ½ç˜¦ã€‚\n#å‡è„‚é¤", i: "å¥åº·é¤" } },
      { m: { t: "æ´»åŠ›æ»¡æ»¡", c: "åšç¤¾åŒºé‡Œæœ€é“çš„è¾£å¦ˆï¼\nè‡ªä¿¡çš„å¥³äººæœ€ç¾ä¸½ã€‚\n#${shopName} #è¾£å¦ˆ", i: "è‡ªä¿¡ç¬‘å®¹" }, a: { t: "æ–°æ‰‹å‹å¥½", c: "é›¶åŸºç¡€ï¼Ÿåˆ«æ€•ï¼Œæˆ‘ä»¬æ‰‹æŠŠæ‰‹æ•™ã€‚\né‚»å±…ä¸“å±ä½“éªŒè¯¾9.9å…ƒã€‚\n#æ–°æ‰‹", i: "ç§æ•™è¾…åŠ©" }, e: { t: "äº§åä¿®å¤", c: "æ¼å°¿ï¼Ÿè…°ç—›ï¼Ÿåˆ«å¿ç€ï¼\näº§åä¿®å¤é»„é‡‘æœŸåˆ«é”™è¿‡ã€‚\n#ç›†åº•è‚Œ", i: "éª¨ç›†æ¨¡å‹" } },
      { m: { t: "å‘¨äº”èšä¼š", c: "ä»Šæ™šæœ‰ç‰¹åˆ«æ´»åŠ¨ï¼Œå¸¦å­©å­æ¥ç©ï¼\nç‘œä¼½+æ¸¸æˆï¼Œå¿«ä¹ç¿»å€ã€‚\n#${shopName} #æ´»åŠ¨", i: "æ°”çƒè£…é¥°" }, a: { t: "å‘¨æœ«é¢„å‘Š", c: "å‘¨æœ«äº²å­è¯¾åé¢å‘Šæ€¥ï¼\nèµ¶ç´§ç¾¤é‡Œæ¥é¾™ã€‚\n#æŠ¢è¯¾", i: "æŠ¢è¯¾æˆªå›¾" }, e: { t: "ç¾å¥½å‘¨æœ«", c: "å‘¨æœ«æ„‰å¿«ï¼Œé‚»å±…ä»¬ã€‚\nå¥½å¥½ä¼‘æ¯ï¼Œå¤šé™ªé™ªå®¶äººã€‚\n#å‘¨æœ«", i: "èŠ±æŸ" } },
      { m: { t: "å…¨å®¶æ€»åŠ¨å‘˜", c: "æ‹‰ç€è€å…¬å­©å­ä¸€èµ·æ¥ï¼\nå…¨å®¶å¥åº·æ‰æ˜¯ç¦ã€‚\n#${shopName} #å®¶åº­æ—¥", i: "å…¨å®¶ç¦" }, a: { t: "äºŒæ‰‹å¸‚é›†", c: "é—²ç½®äº¤æ¢+ç‘œä¼½ä½“éªŒï¼Œå¿«æ¥ï¼\nå°±åœ¨é¦†é—¨å£ï¼Œçƒ­é—¹éå‡¡ã€‚\n#å¸‚é›†", i: "å¸‚é›†ç…§ç‰‡" }, e: { t: "æ¸©é¦¨æ—¶åˆ»", c: "é™ªä¼´æ˜¯æœ€é•¿æƒ…çš„å‘Šç™½ã€‚\næ™šå®‰ï¼Œå¹¸ç¦çš„å®¶ã€‚\n#æ™šå®‰", i: "æ‹¥æŠ±" } }
    ],
    studio: [
      { m: { t: "ç§æ•™é¢„çº¦", c: "å‘¨æ—¥ä¸ä¼‘æ¯ï¼Œåªä¸ºæ›´ä¼˜ç§€çš„ä½ ã€‚\nä»Šæ—¥ç§æ•™å·²æ»¡ï¼Œå¯çº¦æ˜å¤©ã€‚\n#${shopName} #é«˜å®š", i: "ç§æ•™æˆ¿" }, a: { t: "æ·±åº¦è¯„ä¼°", c: "ä½ çš„èº«ä½“ä¼šè¯´è¯ï¼Œå¬å¬å®ƒçš„å£°éŸ³ã€‚\nç²¾å‡†è¯„ä¼°ï¼Œç§‘å­¦è®­ç»ƒã€‚\n#ä½“æµ‹", i: "ä½“æµ‹ä»ª" }, e: { t: "æ™šå®‰", c: "è‡ªå¾‹å³è‡ªç”±ã€‚\næ„¿ä½ æ‹¥æœ‰ä¸è¢«å®šä¹‰çš„äººç”Ÿã€‚\n#æ™šå®‰", i: "é«˜çº§ç°è°ƒ" } },
      { m: { t: "é«˜å®šç”Ÿæ´»", c: "æ—©å®‰ã€‚ç”¨æ™®æ‹‰æå¼€å¯ç²¾è‡´ä¸€å‘¨ã€‚\nä¼˜é›…ï¼Œæ°¸ä¸è¿‡æ—¶ã€‚\n#${shopName} #æ™®æ‹‰æ", i: "æ™®æ‹‰æåºŠ" }, a: { t: "ä¸‹åˆèŒ¶", c: "ç‡•çª+ç‘œä¼½ï¼Œå® çˆ±è‡ªå·±ã€‚\nåœ¨${location}ï¼Œäº«å—å˜ç¾ã€‚\n#ç²¾è‡´", i: "ç‡•çª" }, e: { t: "ç§å¯†ç©ºé—´", c: "æ— äººæ‰“æ‰°ï¼Œåªæœ‰å‘¼å¸ã€‚\nå±äºä½ çš„ç§å¯†é¿é£æ¸¯ã€‚\n#ç§å¯†", i: "çƒ›å…‰" } },
      { m: { t: "ä½“æ€ç²¾ä¿®", c: "ç›´è§’è‚©ã€å¤©é¹…é¢ˆï¼Œä½ ä¹Ÿå¯ä»¥æ‹¥æœ‰ã€‚\nç»†èŠ‚å†³å®šæˆè´¥ã€‚\n#${shopName} #ä½“æ€", i: "å±€éƒ¨ç‰¹å†™" }, a: { t: "äº§åä¿®å¤", c: "è…¹ç›´è‚Œä¿®å¤ï¼Œæ‰¾å›å°‘å¥³æ„Ÿã€‚\nä¸“ä¸šæ‰‹æ³•ï¼Œæ•ˆæœæ˜¾è‘—ã€‚\n#äº§å", i: "è…¹éƒ¨ç‰¹å†™" }, e: { t: "ä¼šå‘˜åé¦ˆ", c: "æ„Ÿè°¢ä¿¡ä»»ï¼Œæ•ˆæœçœ‹å¾—è§ã€‚\nå£ç¢‘æ˜¯æœ€å¥½çš„å¹¿å‘Šã€‚\n#å¥½è¯„", i: "èŠå¤©æˆªå›¾" } },
      { m: { t: "ååª›ç¤¾äº¤", c: "å’Œä¼˜ç§€çš„äººåœ¨ä¸€èµ·ï¼Œä¼šå˜å¾—æ›´ä¼˜ç§€ã€‚\n${shopName}ä¼šå‘˜ä¸“å±æ²™é¾™ã€‚\n#åœˆå±‚", i: "åˆå½±" }, a: { t: "å®šåˆ¶è¯¾ç¨‹", c: "åƒäººåƒé¢ï¼Œåªåšé€‚åˆä½ çš„æ–¹æ¡ˆã€‚\næ‹’ç»æµæ°´çº¿å¼æ•™å­¦ã€‚\n#å®šåˆ¶", i: "æ‰‹å†™è®¡åˆ’" }, e: { t: "æƒ…ç»ªç–—æ„ˆ", c: "é¢‚é’µéŸ³ç–—ï¼Œå‡€åŒ–å¿ƒçµã€‚\nè®©èº«å¿ƒå›å½’å¹³è¡¡ã€‚\n#é¢‚é’µ", i: "é¢‚é’µ" } },
      { m: { t: "æŠ—è¡°ç§˜ç±", c: "ç‘œä¼½æ˜¯æœ€å¥½çš„å†»é¾„æœ¯ã€‚\næŠ•èµ„èº«ä½“ï¼Œæ°¸è¿œç¨³èµšä¸èµ”ã€‚\n#${shopName} #æŠ—è¡°", i: "é€†é¾„ä¼šå‘˜" }, a: { t: "ç–¼ç—›ç®¡ç†", c: "è…°ç—›ï¼Ÿè†ç›–ç—›ï¼Ÿæ¥è¿™å°±å¯¹äº†ã€‚\nä¸ä»…ç»ƒå½¢ï¼Œæ›´ç–—ä¼¤ã€‚\n#ç†ç–—", i: "åº·å¤æ‰‹æ³•" }, e: { t: "é™å¿ƒ", c: "å¿ƒé™è‡ªç„¶å‡‰ã€‚\næ™šå®‰ï¼Œå¥½æ¢¦ã€‚\n#å†¥æƒ³", i: "ç¦…æ„å¸ƒç½®" } },
      { m: { t: "å‘¨äº”é‚€çº¦", c: "æœ¬å‘¨ä»…å‰©3ä¸ªä½“éªŒåé¢ã€‚\nåªæ¥å¾…é¢„çº¦å®¢æˆ·ã€‚\n#${shopName} #é¢„çº¦", i: "é‚€è¯·å‡½" }, a: { t: "å¤‡å©šç‰¹è®­", c: "åšæœ€ç¾æ–°å¨˜ï¼Œæ€¥æ•‘å¡‘å½¢ã€‚\nä¸€ç”Ÿä¸€æ¬¡ï¼Œå¿…é¡»å®Œç¾ã€‚\n#å¤‡å©š", i: "å©šçº±" }, e: { t: "å‘¨æœ«æ„‰å¿«", c: "äº«å—å‘¨æœ«ï¼Œäº«å—ç”Ÿæ´»ã€‚\nä¿æŒçƒ­çˆ±ï¼Œå¥”èµ´å±±æµ·ã€‚\n#å‘¨æœ«", i: "çº¢é…’" } },
      { m: { t: "CEOæ™¨ç»ƒ", c: "è¶ŠæˆåŠŸçš„äººï¼Œè¶Šæ³¨é‡å¥åº·ã€‚\n${shopName}ï¼Œç²¾è‹±çš„é€‰æ‹©ã€‚\n#ç²¾è‹±", i: "ç²¾è‹±èƒŒå½±" }, a: { t: "é«˜å°”å¤«ä½“èƒ½", c: "æå‡æŒ¥æ†ç¨³å®šæ€§ï¼Œä¸“é—¨å®šåˆ¶ã€‚\nè¿åŠ¨è¡¨ç°æå‡è¯¾ã€‚\n#é«˜å°”å¤«", i: "é«˜å°”å¤«" }, e: { t: "åªä¸ºå°‘æ•°", c: "å°Šè´µä½“éªŒï¼Œç”±æ­¤å¼€å§‹ã€‚\næ™šå®‰ã€‚\n#${shopName}", i: "é—¨å¤´å¤œæ™¯" } }
    ]
  };

  // å…œåº•é€»è¾‘ï¼Œé˜²æ­¢ç´¢å¼•è¶Šç•Œ
  const list = momentsTemplates[storeType] || momentsTemplates.mall;
  const mt = list[dayIndex % list.length] || list[0];
  
  const moments = [
    { time: "10:00", icon: Sun, title: `ã€æ—©å®‰Â·${mt.m.t}ã€‘`, content: mt.m.c, imageDesc: mt.m.i },
    { time: "14:00", icon: Coffee, title: `ã€åˆé—´Â·${mt.a.t}ã€‘`, content: mt.a.c, imageDesc: mt.a.i },
    { time: "20:00", icon: Moon, title: `ã€æ™šå®‰Â·${mt.e.t}ã€‘`, content: mt.e.c, imageDesc: mt.e.i }
  ];

  // 2. æŠ–éŸ³çŸ­è§†é¢‘ (7å¤©ä¸é‡æ ·)
  const douyinScripts = {
    mall: [
      { t: "ä¸‹å‘¨ç˜¦èº«è®¡åˆ’è¡¨ğŸ“…", c: "å‘¨æ—¥ä¸å·æ‡’ï¼Œä¸‹å‘¨ç˜¦å¾—å¿«ï¼", s: "å±•ç¤ºæ‰‹å†™è¯¾è¡¨(ç‰¹å†™) -> å¿«é€Ÿå‰ªè¾‘7ä¸ªåŠ¨ä½œ(å¡ç‚¹) -> æ ¸å¿ƒæ”¶ç´§ç‰¹å†™ -> è¯¾åé¥®é£Ÿå±•ç¤º", bgm: "ã€ŠUh Ohã€‹- æ¬¢å¿«èŠ‚å¥" },
      { t: "å‘¨ä¸€æ•‘æ˜Ÿ", c: "é€›è¡—ç´¯äº†ï¼Ÿæ¥è¿™é‡Œèººå¹³", s: "æç€è´­ç‰©è¢‹ç´¯ç˜«(å…¨æ™¯) -> åˆ‡æ¢åˆ°ç‘œä¼½å«ä¸Šæ‹‰ä¼¸(ç‰¹å†™) -> èˆ’æœè¡¨æƒ…(ç‰¹å†™)", bgm: "ã€ŠFunnyã€‹- è½»æ¾ææ€ª" },
      { t: "å•†åœºé¿éš¾", c: "å•†åœºé‡Œç«Ÿç„¶è—ç€ä¸ªé¿éš¾æ‰€ï¼Ÿ", s: "å–§é—¹çš„å•†åœºå¿«å‰ª(å¿«) -> æ¨é—¨è¿›å…¥å®‰é™çš„é¦†å†…(æ…¢) -> å¼ºçƒˆåå·®éŸ³æ•ˆ", bgm: "ã€ŠQuietã€‹- æ²»æ„ˆç³»" },
      { t: "é—ºèœœçº¦ä¼š", c: "åˆ«å–å¥¶èŒ¶äº†ï¼Œå¸¦é—ºèœœæ¥è¿™", s: "é—ºèœœåŒäººç‘œä¼½(ä¸­æ™¯) -> äº’ç›¸å¸®å¿™æ‹ç…§(äº’åŠ¨) -> ç²¾è‡´ä¸‹åˆèŒ¶(ç‰¹å†™)", bgm: "ã€ŠBest Friendã€‹- ç”œç¾" },
      { t: "ç¾èƒŒæŒ‘æˆ˜", c: "å…¨å•†åœºèº«æå¥½çš„å°å§å§éƒ½åœ¨è¿™", s: "èƒŒå½±ç‰¹å†™(æ…¢åŠ¨ä½œ) -> è½¬èº«éœ²è„¸(æƒŠè‰³) -> é‚€è¯·åŠ¨ä½œ(ä¸»è§‚è§†è§’)", bgm: "ã€ŠGimme Moreã€‹- æ€§æ„Ÿå¡ç‚¹" },
      { t: "å‘¨æœ«é¢„å‘Š", c: "æœ¬å‘¨å…­å¼€æ”¾æ—¥ï¼Œ0å…ƒä½“éªŒ", s: "å±•ç¤ºä½“éªŒå¡(ç‰¹å†™) -> æ‰«ç åŠ¨ä½œ(å¼•å¯¼) -> å€’è®¡æ—¶éŸ³æ•ˆ(ç´§è¿«æ„Ÿ)", bgm: "ã€ŠCounting Starsã€‹- æ¿€æ˜‚" },
      { t: "æ²‰æµ¸å¼", c: "åœ¨ç¹åä¸­å¿ƒä¿®èº«å…»æ€§", s: "çª—å¤–è½¦æ°´é©¬é¾™(å»¶æ—¶) -> çª—å†…å¹³é™å‘¼å¸(å›ºå®šæœºä½) -> å”¯ç¾å‰ªå½±", bgm: "ã€ŠBreathã€‹- åŸå£°ASMR" }
    ],
    office: [
      { t: "ä¸‹å‘¨è®¡åˆ’", c: "æ‰“å·¥äººçš„å›è¡€æŒ‡å—", s: "å±•ç¤ºä¸€å‘¨è¯¾è¡¨ -> é‡ç‚¹åœˆå‡ºè‚©é¢ˆè¯¾ -> æ¡æ‹³åŠ æ²¹", bgm: "ã€ŠSunroofã€‹- æ´»åŠ›" },
      { t: "æ‹’ç»Emo", c: "å‘¨ä¸€ç»¼åˆç—‡ï¼Ÿä¸å­˜åœ¨çš„ï¼", s: "æ²¡ç²¾ç¥æ‰“å­—(é»‘ç™½) -> æ™¨ç»ƒåç²¾ç¥é¥±æ»¡(å½©è‰²) -> èµ°è·¯å¸¦é£", bgm: "ã€ŠNew Boyã€‹- ç”šè‡³æœ‰ç‚¹æƒ³è·³èˆ" },
      { t: "å·¥ä½æ‹‰ä¼¸", c: "åç€ä¹Ÿèƒ½ç˜¦è‚šå­ï¼Ÿ", s: "ååœ¨æ¤…å­ä¸Šæ¼”ç¤º -> ä¾§è…°æ‹‰ä¼¸ -> åŒäº‹æƒŠè®¶çš„çœ¼å…‰", bgm: "ã€ŠFunny Songã€‹- ææ€ªæ•™å­¦" },
      { t: "åˆä¼‘çœŸç›¸", c: "åˆ«è¶´ç€ç¡äº†ï¼Œé¢ˆæ¤å—ä¸äº†", s: "è¶´ç¡å‹ç—•ç‰¹å†™ -> æ¢åˆ°ç‘œä¼½é¦†åˆä¼‘ -> èˆ’é€‚çœ¼ç½©", bgm: "ã€ŠLullabyã€‹- èˆ’ç¼“" },
      { t: "åŠ ç­æ•‘æ˜Ÿ", c: "é¢ˆæ¤ç–¼åˆ°æƒ³ç¦»èŒï¼Ÿ", s: "æ‚è„–å­ç—›è‹¦ -> è€å¸ˆæ‰‹æ³•æŒ‰æ‘© -> ç¬é—´å›è¡€", bgm: "ã€ŠSave Meã€‹- èŠ‚å¥æ„Ÿ" },
      { t: "å‘¨äº”ç‹‚æ¬¢", c: "ä¸‹ç­åˆ«èµ°ï¼Œå»ç»ƒè‡€ï¼", s: "å…³ç”µè„‘åˆç›– -> æ¢ç‘œä¼½æœ -> åŠ¨æ„Ÿå•è½¦/çƒ­èˆ", bgm: "ã€ŠPartyã€‹- åŠ¨æ„Ÿç”µéŸ³" },
      { t: "ç‹¬å¤„æ—¶å…‰", c: "å‘¨æœ«ä¸åŠ ç­ï¼ŒåªåŠ ç»ƒ", s: "ç©ºæ—·çš„åŠå…¬å®¤ -> é˜³å…‰ä¸‹çš„ç‘œä¼½å« -> äº«å—å­¤ç‹¬", bgm: "ã€ŠAloneã€‹- é’¢ç´æ›²" }
    ],
    community: [
      { t: "äº²å­æ—¶å…‰", c: "å¸¦å¨ƒç»ƒç‘œä¼½ï¼", s: "å­©å­ç©è€ -> å¦ˆå¦ˆç»ƒä¹ ", bgm: "ã€ŠBaby Sharkã€‹Remix" },
      { t: "é€å®Œå¨ƒå", c: "å¦ˆå¦ˆçš„è‡ªç”±æ—¶é—´", s: "æ ¡é—¨å£æŒ¥æ‰‹ -> è·‘è¿›é¦† -> æ·±å‘¼å¸", bgm: "ã€ŠFreeã€‹- è‡ªç”±" },
      { t: "é‚»é‡Œå…«å¦", c: "ç‹å§ç˜¦äº†ï¼", s: "çªƒçªƒç§è¯­ -> ç‹å§èƒŒå½± -> ç¾¡æ…•", bgm: "ã€ŠOoh La Laã€‹" },
      { t: "å¥½çœ è®¡åˆ’", c: "å¤±çœ ï¼Ÿ", s: "ç¿»æ¥è¦†å» -> é˜´ç‘œä¼½ -> ç§’ç¡", bgm: "ã€ŠSleepã€‹- ç™½å™ªéŸ³" },
      { t: "ä¹°èœé¡ºè·¯", c: "ä¸‹æ¥¼å°±èƒ½ç»ƒ", s: "æèœç¯®å­ -> æ”¾å‰å° -> å¼€ç»ƒ", bgm: "ã€ŠLifeã€‹- ç”Ÿæ´»åŒ–" },
      { t: "å‘¨æœ«å›¢ç»ƒ", c: "å…¨å°åŒºå¥³ç¥", s: "æ»¡å‘˜æ•™å®¤ -> æ•´é½åŠ¨ä½œ -> æ¬¢ç¬‘", bgm: "ã€ŠTogetherã€‹- æ¸©é¦¨" },
      { t: "è€å…¬å¸¦å¨ƒ", c: "ç»™è‡ªå·±æ”¾å‡", s: "äº¤æ¥å¨ƒ -> æ½‡æ´’å‡ºé—¨ -> äº«å—", bgm: "ã€ŠQueenã€‹- éœ¸æ°”" }
    ],
    studio: [
      { t: "ç§æ•™æ­ç§˜", c: "ä¸€èŠ‚é¡¶åèŠ‚", s: "æ™®æ‹‰æåºŠ -> å‘åŠ›é¢¤æŠ– -> æ±—æ°´", bgm: "ã€ŠPowerã€‹- åŠ›é‡æ„Ÿ" },
      { t: "é«˜å®šç”Ÿæ´»", c: "è‡ªå¾‹å³åŒ»ç¾", s: "ç²¾è‡´ç´ é¢œ -> å–å’–å•¡ -> ç¿»æ‚å¿—", bgm: "ã€ŠJazzã€‹- çˆµå£«" },
      { t: "ä½“æ€ç²¾ä¿®", c: "åœ†è‚©å¤§æ”¹é€ ", s: "ä¾§é¢å¯¹æ¯” -> å¾®è°ƒæŒ‡å°– -> æŒºæ‹”", bgm: "ã€ŠTransformã€‹- ç§‘æŠ€æ„Ÿ" },
      { t: "äº§åä¿®å¤", c: "è…¹ç›´è‚Œä¿®å¤", s: "æµ‹é‡æ‰‹æ³• -> æƒŠå–œè¡¨æƒ… -> å‘¼å¸", bgm: "ã€ŠHopeã€‹- æ¸©æŸ”" },
      { t: "æƒ…ç»ªç–—æ„ˆ", c: "é¢‚é’µä½“éªŒ", s: "æ•²å‡»é¢‚é’µ -> é—­çœ¼ -> æ³ªæµ", bgm: "ã€ŠHealingã€‹- é¢‚é’µåŸå£°" },
      { t: "ååª›ç¤¾äº¤", c: "ç‘œä¼½ä¸‹åˆèŒ¶", s: "ç²¾è‡´æ‘†ç›˜ -> ç¢°æ¯ -> åŠ å¾®ä¿¡", bgm: "ã€ŠClassyã€‹- ä¼˜é›…" },
      { t: "åªä¸ºå°‘æ•°", c: "ä»…æ¥å¾…5ä½", s: "é¢„çº¦æœ¬ -> ç§å¯†é—¨ç¦ -> ä¸“å±æŸœ", bgm: "ã€ŠLuxuryã€‹- é«˜çº§" }
    ]
  };

  const dy = douyinScripts[storeType][dayIndex];
  const douyinPost = {
    title: dy.t,
    content: `${dy.c}\n#${shopName} #${themeInfo.theme} #${location}`,
    bgm: dy.bgm,
    script: [
      { scene: "0-3s", visual: "é»„é‡‘3ç§’ï¼š" + dy.s.split(" -> ")[0], audio: "éŸ³æ•ˆï¼šé‡éŸ³/ç–‘é—®/æ‰“ç¢å£°" },
      { scene: "3-8s", visual: "æ ¸å¿ƒå±•ç¤ºï¼š" + (dy.s.split(" -> ")[1] || "å†…å®¹å±•ç¤º"), audio: "å£æ’­/BGMåˆ‡å…¥/ç”»å¤–éŸ³è®²è§£" },
      { scene: "8-15s", visual: "ç»†èŠ‚/æ•ˆæœï¼š" + (dy.s.split(" -> ")[2] || "æ•ˆæœå±•ç¤º"), audio: "è¯¦ç»†è®²è§£æˆ–å¡ç‚¹éŸ³ä¹é«˜æ½®" },
      { scene: "15s+", visual: "å¼•å¯¼å…³æ³¨ï¼šç‚¹å‡»å¤´åƒ/å®šä½/å·¦ä¸‹è§’", audio: `ç”»å¤–éŸ³ï¼šæˆ‘åœ¨${location}ç­‰ä½ ` }
    ]
  };

  // 3. å°çº¢ä¹¦ç¬”è®° (7å¤©ä¸é‡æ ·)
  const xhsTemplates = {
    mall: [
      { t: "æœ¬å‘¨OOTD", type: "ç©¿æ­", img: "ä¸€å‘¨ç‘œä¼½æœæ‹¼å›¾" },
      { t: "å‘¨ä¸€å»æ°´è‚¿", type: "å¹²è´§", img: "é¢éƒ¨/è…¿éƒ¨å¯¹æ¯”å›¾" },
      { t: "å•†åœºéšè—ç©æ³•", type: "æ¢åº—", img: "é—¨å¤´+ç¯å¢ƒå¤§ç‰‡" },
      { t: "ç»ƒå®Œåƒä»€ä¹ˆ", type: "é¥®é£Ÿ", img: "å•†åœºè½»é£Ÿæ¨è" },
      { t: "è§£å‹å¥½å»å¤„", type: "æƒ…æ„Ÿ", img: "å†¥æƒ³æ°›å›´å›¾" },
      { t: "å‘¨æœ«0å…ƒç»ƒ", type: "ç¦åˆ©", img: "ä½“éªŒå¡å®æ‹" },
      { t: "è¿™æ˜¯ä»€ä¹ˆç¥ä»™åœ°", type: "ç”Ÿæ´»", img: "å¯¹é•œè‡ªæ‹" }
    ],
    office: [
      { t: "ä¸‹å‘¨å·¥ä½œä¸ç´¯", type: "è§„åˆ’", img: "è¯¾è¡¨+æ‰‹è´¦" },
      { t: "æ—©å…«äººç»­å‘½", type: "å…±é¸£", img: "å’–å•¡+ç‘œä¼½å«" },
      { t: "å·¥ä½æ‹‰ä¼¸æ³•", type: "å¹²è´§", img: "åŠ¨ä½œå›¾è§£" },
      { t: "åˆä¼‘30åˆ†é’Ÿ", type: "æ‰“å¡", img: "åˆç¡vsç‘œä¼½å¯¹æ¯”" },
      { t: "æ‹’ç»èŒä¸šç—…", type: "ç§‘æ™®", img: "é¢ˆæ¤ç»“æ„å›¾" },
      { t: "ä¸‹ç­å»å“ªå„¿", type: "ç”Ÿæ´»", img: "å¤œæ™¯ç‘œä¼½å›¾" },
      { t: "å‘¨æœ«ä¸åŠ ç­", type: "å¿ƒæƒ…", img: "é˜³å…‰ä¸‹çš„æ•™å®¤" }
    ],
    community: [
      { t: "å®å¦ˆé€†è¢­è®°", type: "æ•…äº‹", img: "èº«æå‰åå¯¹æ¯”" },
      { t: "é€å®Œå¨ƒå°±æ¥", type: "æ—¥å¸¸", img: "æ ¡é—¨å£+é¦†é—¨å£" },
      { t: "é‚»å±…çœŸå®åé¦ˆ", type: "å£ç¢‘", img: "èŠå¤©è®°å½•æˆªå›¾" },
      { t: "äº§åè‚šå­æ€ä¹ˆå‡", type: "å¹²è´§", img: "è…¹éƒ¨è§£å‰–å›¾" },
      { t: "ç¡ä¸ªå¥½è§‰", type: "å¥åº·", img: "åŠ©çœ ä½“å¼å›¾" },
      { t: "å‘¨æœ«äº²å­è¯¾", type: "æ´»åŠ¨", img: "æ¯å¥³åˆå½±" },
      { t: "å°åŒºé‡Œçš„å®è—", type: "æ¢åº—", img: "å®šä½å›¾+ç¯å¢ƒ" }
    ],
    studio: [
      { t: "ç§æ•™çš„ç§˜å¯†", type: "ç§‘æ™®", img: "æ™®æ‹‰æåºŠç»†èŠ‚" },
      { t: "è‡ªå¾‹ä¸Šç˜¾", type: "é¸¡æ±¤", img: "é©¬ç”²çº¿ç‰¹å†™" },
      { t: "ä½“æ€å†³å®šæ°”è´¨", type: "å¹²è´§", img: "ç›´è§’è‚©å¯¹æ¯”" },
      { t: "ä¼šå‘˜å®¶å®´", type: "ç¤¾äº¤", img: "ç²¾è‡´é¤æ¡Œ" },
      { t: "æƒ…ç»ªç–—æ„ˆ", type: "æ²»æ„ˆ", img: "é¢‚é’µ/é¦™è–°" },
      { t: "è´µå¦‡éƒ½åœ¨ç»ƒ", type: "åœˆå±‚", img: "åœè½¦åœºè±ªè½¦+é—¨å¤´" },
      { t: "åªæ¥å¾…é¢„çº¦", type: "è°ƒæ€§", img: "ç§å¯†åŒ…é—´å›¾" }
    ]
  };

  const xh = xhsTemplates[storeType][dayIndex];
  const xiaohongshuPost = {
    title: xh.t,
    content: `ä»Šå¤©æ˜¯${themeInfo.day}ï¼Œåˆ†äº«ä¸€ä¸ª${xh.type}ä¸»é¢˜ï¼\nåœ¨${shopName}çš„ç¬¬Nå¤©ã€‚\nè¿™é‡Œä¸ä»…æœ‰ä¸“ä¸šçš„è€å¸ˆï¼Œè¿˜æœ‰ä¸€ç¾¤å¯çˆ±çš„ä¼½äººã€‚\nä»Šå¤©ç»ƒäº†...ï¼ˆè¯¦ç»†è®°å½•ï¼‰\nğŸ“åæ ‡ï¼š${location}\nğŸ’¬ è¯„è®ºåŒºæ‰£â€œ1â€é¢†ä½“éªŒå¡ï¼\n#${themeInfo.theme} #ç‘œä¼½æ—¥å¸¸`,
    images: [
      { label: "å°é¢å›¾", desc: `é«˜æ¸…ç¾å›¾ï¼Œå¸¦ä¸Šå¤§å­—æ ‡é¢˜ï¼š${xh.t}` },
      { label: "ç»†èŠ‚å›¾", desc: `${xh.img} (ç»†èŠ‚ç‰¹å†™)` },
      { label: "å¹²è´§å›¾", desc: "åŠ¨ä½œæ‹†è§£æˆ–å¯¹æ¯”å›¾" },
      { label: "å¼•å¯¼å›¾", desc: "åº—é“ºå®šä½ + å…³æ³¨å¼•å¯¼" }
    ]
  };

  return { moments, douyinPost, xiaohongshuPost };
};

// æ™ºèƒ½å¡é¡¹ç”Ÿæˆå™¨ (åŸºäºè¡¨æ ¼é€»è¾‘)
const generateCardMatrix = (storeType, priceRange, painPoints) => {
  // ä»·æ ¼ä¹˜æ•° (åŸºäºé€‰ä¸­åŒºé—´çš„å‡ä»·)
  const rangeMap = { low: 1500, mid: 3500, high: 7500, vip: 15000 };
  const basePrice = rangeMap[priceRange] || 3500;
  
  const cards = [];

  // 1. åˆ©æ¶¦ç§æ•™å¡ A (æ”¹å–„å‹)
  cards.push({
    type: "åˆ©æ¶¦ç§æ•™å¡A",
    name: "ç§æ•™ 10 æ¬¡æ”¹å–„å¡",
    content: "10 èŠ‚ ç§æ•™ / 3-4 ä¸ªæœˆ",
    priceRange: `${Math.round(basePrice * 0.8)}-${Math.round(basePrice * 1.2)} å…ƒ`,
    unitPrice: `${Math.round(basePrice * 0.1)}-${Math.round(basePrice * 0.15)} å…ƒ/èŠ‚`,
    targetUser: "æœ‰æ˜ç¡®éœ€æ±‚ï¼ˆä½“æ€/å‡è„‚/äº§åï¼‰",
    position: "é‡ç‚¹ç”±è€å¸ˆä¸€å¯¹ä¸€é”€å”®ï¼Œæ¯›åˆ©é«˜"
  });

  // 2. åˆ©æ¶¦ç§æ•™å¡ B (èœ•å˜å‹)
  cards.push({
    type: "åˆ©æ¶¦ç§æ•™å¡B",
    name: "ç§æ•™ 20 æ¬¡èœ•å˜å¡",
    content: "20 èŠ‚ ç§æ•™ / 6-8 ä¸ªæœˆ",
    priceRange: `${Math.round(basePrice * 1.5)}-${Math.round(basePrice * 2.2)} å…ƒ`,
    unitPrice: `${Math.round(basePrice * 0.08)}-${Math.round(basePrice * 0.12)} å…ƒ/èŠ‚`,
    targetUser: "é«˜å‡€å€¼ã€å¼ºéœ€æ±‚å®¢æˆ·",
    position: "é€‚åˆåšâ€œé˜¶æ®µæ€§æ”¹å˜è®¡åˆ’â€"
  });

  // 3. å°ç­é«˜é˜¶å¡
  cards.push({
    type: "å°ç­é«˜é˜¶å¡",
    name: "æ™®æ‹‰æ/ä¿®å¤å°ç­å¡",
    content: "30 èŠ‚ å°ç­ / 6-9 ä¸ªæœˆ",
    priceRange: `${Math.round(basePrice * 1.2)}-${Math.round(basePrice * 1.8)} å…ƒ`,
    unitPrice: `${Math.round(basePrice * 0.05)}-${Math.round(basePrice * 0.08)} å…ƒ/èŠ‚`,
    targetUser: "é¢ˆè‚©è…°é—®é¢˜ã€äº§åä¿®å¤",
    position: "å¯ä»¥åšæˆâ€œä¸“æ¡ˆè¯¾ç¨‹â€ï¼ˆä½“æ€æ”¹å–„è¥ï¼‰"
  });

  // 4. å¹´åº¦å°Šäº«å¡ (å¤§é¢ç°é‡‘æµ)
  cards.push({
    type: "å¹´åº¦å°Šäº«å¡",
    name: "é»‘é‡‘å¹´å¡ï¼ˆå›¢è¯¾+å°ç­ï¼‰",
    content: "å¹´åº¦ç•…ç»ƒ + å°ç­èµ è¯¾ï¼ˆå¦‚ 12 èŠ‚ï¼‰",
    priceRange: `${Math.round(basePrice * 2.0)}-${Math.round(basePrice * 3.0)} å…ƒ`,
    unitPrice: `å¹³æ‘Šåæœˆå‡ ${Math.round(basePrice * 0.2)}-${Math.round(basePrice * 0.3)} å…ƒ`,
    targetUser: "æ ¸å¿ƒé“ç²‰/è€æ¿/é«˜æ”¶å…¥ç¾¤ä½“",
    position: "æ‰“é€ â€œæœ€é«˜ç­‰çº§ä¼šå‘˜â€ï¼Œèµ é€ä¸“å±æœåŠ¡"
  });

  // 5. å®¶åº­/åŒäººå¡ (è£‚å˜)
  cards.push({
    type: "å®¶åº­/åŒäººå¡",
    name: "åŒäººå…±äº«å¹´åº¦å¡",
    content: "2 äººå…±äº«æ¬¡å¡/å¹´å¡",
    priceRange: `${Math.round(basePrice * 2.5)}-${Math.round(basePrice * 3.5)} å…ƒ`,
    unitPrice: `å•äººæŠ˜ç®—çº¦ ${Math.round(basePrice * 1.2)}-${Math.round(basePrice * 1.8)}/å¹´`,
    targetUser: "å¤«å¦»/é—ºèœœ/æ¯å¥³",
    position: "æå‡å®¢å•ä»·+ç»‘å®šä¸¤ä¸ªäººçš„ç²˜æ€§"
  });

  return cards;
};

// ç§èŠè¯æœ¯ç”ŸæˆåŠ©æ‰‹
const generatePrivateScripts = (storeType, shopName, location) => {
  const isHighEnd = storeType === 'studio' || storeType === 'mall';
  return {
    dead: isHighEnd 
      ? `ã€${shopName}Â·è€å‹è®°ã€‘\näº²çˆ±çš„ï¼Œå¥½ä¹…ä¸è§ã€‚è¿™é‡Œæ˜¯åº—é•¿ã€‚\nç¿»çœ‹è®°å½•å‘ç°æ‚¨å¾ˆä¹…æ²¡æ¥ç»ƒä¹ äº†ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æœ€è¿‘å¤ªå¿™ï¼Ÿ\næœ€è¿‘æˆ‘ä»¬é’ˆå¯¹è€ä¼šå‘˜æœ‰ä¸€åœºã€ä½“æ€å¤æµ‹ã€‘ï¼Œä¸æ¨é”€ï¼Œåªæƒ³çœ‹çœ‹æ‚¨çš„èº«ä½“å˜åŒ–ã€‚\næœ¬æœˆæˆ‘ç»™æ‚¨é¢„ç•™äº†ä¸€ä¸ªåé¢ï¼Œå›æ¥å™å™æ—§ï¼Œå–æ¯èŒ¶ä¹Ÿå¥½ã€‚ğŸµ`
      : `ã€${shopName}Â·å›å½’ç¤¼ã€‘\nå§ï¼Œå¥½ä¹…æ²¡è§ä½ äº†ï¼ğŸ‘‹\næœ€è¿‘èº«ä½“æ€ä¹ˆæ ·ï¼Ÿè‚©è†€è¿˜é…¸å—ï¼Ÿ\nåº—é‡Œæœ€è¿‘æ–°è¿›äº†å‡ å¥—ç‰¹åˆ«å¥½ç”¨çš„è¾…å…·ï¼Œä¸“é—¨é’ˆå¯¹è‚©é¢ˆçš„ã€‚\næˆ‘æƒ³ç€ä½ ï¼Œç‰¹æ„ç”³è¯·äº†ä¸€å¼ ã€7å¤©å›å½’å¡ã€‘ï¼Œå®Œå…¨å…è´¹çš„ï¼\nè¿™å‘¨æœ‰ç©ºå›æ¥ä½“éªŒä¸€ä¸‹å—ï¼Ÿä¸æƒ³æµªè´¹äº†ã€‚`,
    dormant: isHighEnd
      ? `ã€${shopName}Â·ä¸“å±é‚€çº¦ã€‘\näº²çˆ±çš„ï¼Œæœ€è¿‘æœ‰ç©ºå—ï¼Ÿ\nè¿™æ˜¯æˆ‘ä»¬æœ¬æœˆæ–°æ¨å‡ºçš„ã€${storeType === 'studio' ? 'æ™®æ‹‰æ' : 'ç©ºä¸­'}å†…æµ‹è¯¾ã€‘ã€‚\nåé¢ä¸å¯¹å¤–ï¼Œåªé‚€è¯·å’±ä»¬å‡ ä½å®¡ç¾å¥½çš„è€ä¼šå‘˜æ¥æææ„è§ã€‚\næœ¬å‘¨å››/å‘¨äº”æ™šæœ‰ç©ºæ¡£ï¼Œæ‚¨çœ‹å“ªä¸ªæ—¶é—´æ–¹ä¾¿ï¼Ÿæˆ‘å¸®æ‚¨é”ä¸ªä½ã€‚ğŸ”’`
      : `ã€${shopName}Â·å–Šä½ å›æ¥ã€‘\nå®ï¼Œæœ€è¿‘æ˜¯ä¸æ˜¯å·æ‡’å•¦ï¼ŸğŸ˜„\nå¤©æ°”çƒ­äº†/å†·äº†ï¼Œæ­£æ˜¯ç»ƒèƒŒ/æ’å¯’çš„å¥½æ—¶å€™ï¼\nè¿™å‘¨å›¢è¯¾è¡¨è¶…çº§ç²¾å½©ï¼Œå‘¨ä¸‰çš„ã€æš´æ±—ç‡ƒè„‚ã€‘ç‰¹åˆ«é€‚åˆä½ ã€‚\nå¿«å›æ¥åŠ¨ä¸€åŠ¨å§ï¼Œä¸ç„¶å¡éƒ½è¦ç”Ÿé”ˆå•¦ï¼\nè¿™å‘¨æ¥æ‰“å¡ï¼Œæˆ‘ç§äººé€ä½ ä¸€åŒé˜²æ»‘è¢œï¼ğŸ§¦`,
    potential: isHighEnd
      ? `ã€${shopName}Â·ä¸“ä¸šè§£ç­”ã€‘\næ‚¨å¥½ï¼Œæˆ‘æ˜¯åº—é•¿ã€‚\näº†è§£åˆ°æ‚¨å¯¹æ”¹å–„ã€ä½“æ€/è‚©é¢ˆã€‘æ¯”è¾ƒå…³æ³¨ã€‚\nå…¶å®å¾ˆå¤šä¼šå‘˜åˆšå¼€å§‹ä¹Ÿå’Œæ‚¨ä¸€æ ·çŠ¹è±«ï¼Œæ‹…å¿ƒåšæŒä¸ä¸‹æ¥ã€‚\nè¿™æ˜¯æˆ‘ä»¬ä¼šå‘˜ç‹å°å§ç»ƒä¹ 3ä¸ªæœˆçš„å¯¹æ¯”å›¾ï¼ˆå‘å›¾ï¼‰ï¼Œæ•ˆæœå¾ˆæ˜æ˜¾ã€‚\næ‚¨å¯ä»¥å…ˆä¸åŠå¡ï¼Œæœ¬å‘¨å…­æœ‰ä¸ªã€èº«ä½“è¯„ä¼°æ²™é¾™ã€‘ï¼Œæˆ‘é‚€è¯·æ‚¨æ¥å…è´¹å¬å¬ï¼Œæˆ–è®¸å¯¹æ‚¨æœ‰å¸®åŠ©ã€‚`
      : `ã€${shopName}Â·æ–°äººç¦åˆ©ã€‘\nå§ï¼Œè€ƒè™‘å¾—æ€ä¹ˆæ ·å•¦ï¼Ÿ\nå…¶å®ç»ƒç‘œä¼½æœ€å¤§çš„æˆæœ¬ä¸æ˜¯é’±ï¼Œæ˜¯çŠ¹è±«ã€‚\nå’±ä»¬${location}é™„è¿‘çš„é‚»å±…éƒ½åœ¨è¿™ç»ƒï¼Œæ°›å›´ç‰¹åˆ«å¥½ã€‚\nåˆšå¥½æœˆåº•å†²ä¸šç»©ï¼Œå¦‚æœæ‚¨ä»Šå¤©èƒ½å®šä¸‹æ¥ï¼Œæˆ‘å†ç§è‡ªç»™æ‚¨å¤šç”³è¯·2èŠ‚ç§æ•™ä½“éªŒï¼\nåé¢å°±è¿™ä¸€ä¸ªï¼ŒçœŸå¿ƒæƒ³ç•™ç»™æ‚¨ã€‚ğŸ”¥`,
    active: isHighEnd
      ? `ã€${shopName}Â·æ„Ÿæ©ç¤¼ã€‘\näº²çˆ±çš„ï¼Œæ‚¨æœ€è¿‘ç»ƒä¹ çŠ¶æ€å¤ªæ£’äº†ï¼ğŸŒŸ\nçœŸçš„æ˜¯æˆ‘ä»¬çš„æ¨¡èŒƒä¼šå‘˜ã€‚\næœ€è¿‘åº—é‡Œæœ‰ä¸ªã€é—ºèœœæœˆã€‘æ´»åŠ¨ï¼Œæƒ³é‚€è¯·æ‚¨å“å‘³ä¸€è‡´çš„æœ‹å‹æ¥ç©ã€‚\næ‚¨å¸¦æœ‹å‹æ¥ä½“éªŒï¼Œæ— è®ºæ˜¯å¦åŠå¡ï¼Œæˆ‘ä»¬éƒ½é€æ‚¨ä¸€æ¬¡ã€ç²¾æ²¹SPAã€‘ã€‚\nå¥½ä¸œè¥¿è¦å’Œå¥½æœ‹å‹åˆ†äº«å˜›~`
      : `ã€${shopName}Â·åˆä¼™äººã€‘\nå§ï¼Œæ‚¨ç»ƒå¾—è¿™ä¹ˆå¥½ï¼Œç®€ç›´æ˜¯æˆ‘ä»¬çš„æ´»æ‹›ç‰Œï¼ğŸ‘\nå¥½å¤šæ–°ä¼šå‘˜éƒ½é—®æ‚¨çš„èº«ææ˜¯æ€ä¹ˆç»ƒçš„ã€‚\næœ€è¿‘æˆ‘ä»¬æœ‰ä¸ªã€æ¨å¹¿å¤§ä½¿ã€‘è®¡åˆ’ï¼Œæƒ³é‚€è¯·æ‚¨å‚åŠ ã€‚\nåªè¦æ˜¯æ‚¨ä»‹ç»æ¥çš„æœ‹å‹ï¼Œç»™æ‚¨è¿”ç°é‡‘/é€æœˆå¡ï¼\nåæ­£éƒ½è¦ç»ƒï¼Œé¡ºä¾¿èµšç‚¹é›¶èŠ±é’±/è¯¾æ—¶è´¹ï¼Œæ€ä¹ˆæ ·ï¼ŸğŸ’°`
  };
};

// AI é—®ç­”é€»è¾‘ (æ‹ŸäººåŒ–)
const mockAiResponse = (question) => {
  const q = question.toLowerCase();
  
  // æ¨¡æ‹Ÿæ€è€ƒå»¶è¿Ÿåçš„å›ç­”
  let prefix = "";
  let content = "";
  let followup = "";

  if (q.includes("æ•™ç»ƒ") || q.includes("é”€å”®") || q.includes("ç®¡ç†")) {
    prefix = "è€æ¿ï¼Œæ‚¨æåˆ°çš„è¿™ä¸ªé—®é¢˜æ˜¯90%çš„é¦†ä¸»éƒ½ä¼šé‡åˆ°çš„ç—›ç‚¹ï¼Œç¡®å®è®©äººå¤´ç§ƒã€‚ğŸ˜«";
    content = "å…³äºã€æ•™ç»ƒä¸é”€è¯¾/éš¾ç®¡ç†ã€‘ï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼š\n1. æ”¹å˜è€ƒæ ¸æœºåˆ¶ï¼šä»åªæ‹¿è¯¾æ—¶è´¹æ”¹ä¸ºâ€œåº•è–ª+è¯¾æ—¶è´¹+é”€å”®ææˆâ€ï¼Œåˆ©ç›Šæ†ç»‘æ‰èƒ½é©±åŠ¨äººå¿ƒã€‚\n2. å»ºç«‹é”€è¯¾SOPï¼šå¾ˆå¤šæ—¶å€™æ•™ç»ƒä¸æ˜¯ä¸æƒ³å–ï¼Œæ˜¯è„¸çš®è–„ã€ä¸ä¼šå–ã€‚ç»™ä»–ä»¬å‡†å¤‡å¥½è¯æœ¯ï¼ˆå°±åƒæˆ‘ç»™æ‚¨å‡†å¤‡çš„è¿™äº›ï¼‰ï¼Œè®©ä»–ä»¬ç…§ç€å¿µã€‚\n3. æ ‘ç«‹æ ‡æ†ï¼šé‡ç‚¹åŸ¹å…»ä¸€ä¸ªé”€å† æ•™ç»ƒï¼Œå“ªæ€•æ˜¯ç»™é«˜ææˆï¼Œä¹Ÿè¦æŠŠæ°›å›´å¸¦èµ·æ¥ã€‚";
    followup = "é¡ºä¾¿é—®ä¸€å¥ï¼Œæ‚¨ç°åœ¨ç»™æ•™ç»ƒçš„ææˆç‚¹æ•°å¤§æ¦‚æ˜¯å¤šå°‘ï¼Ÿæ˜¯ä¸æ˜¯æ¿€åŠ±ä¸å¤Ÿç›´æ¥ï¼Ÿ";
  } else if (q.includes("æ–°å®¢") || q.includes("æµé‡") || q.includes("å¼•æµ")) {
    prefix = "æ–°åº—å¼€ä¸šæˆ–è€…æµé‡æ¯ç«­çš„æ—¶å€™ï¼Œç¡®å®å¾ˆç„¦è™‘ã€‚æ‹æ‹è‚©ï¼Œæˆ‘ä»¬æ¥è§£å†³å®ƒã€‚ğŸ’ª";
    content = "å…³äºã€è·å–æ–°å®¢ã€‘ï¼Œå’±ä»¬å¯ä»¥ä¸‰æ­¥èµ°ï¼š\n1. åœ°æ¨å‡çº§ï¼šåˆ«å†å‘é‚£ç§æ²¡äººçœ‹çš„ä¼ å•äº†ï¼å¸¦ä¸Šä½“æµ‹ä»ªå»å°åŒºé—¨å£ï¼Œå…è´¹ç»™è·¯äººæµ‹ä½“æ€ï¼ŒåŠ å¾®ä¿¡çš„æ¦‚ç‡æå‡10å€ã€‚\n2. å¼‚ä¸šåˆä½œï¼šæ‰¾å‘¨è¾¹çš„ç¾ç”²åº—ã€ç†å‘åº—ï¼Œæ”¾â€œ9.9å…ƒå‘¨å¡â€ä½œä¸ºå¥¹ä»¬çš„é¡¾å®¢èµ ç¤¼ï¼Œäº’ç›¸å¯¼æµï¼Œèµ„æºç½®æ¢ã€‚\n3. çº¿ä¸Šå›¢è´­ï¼šç¾å›¢/æŠ–éŸ³ä¸Šæ¶ä¸€ä¸ªæä½ä»·å¼•æµè¯¾ï¼ˆå¦‚1å…ƒä½“éªŒï¼‰ï¼Œåªä¸ºè¦ç”µè¯ï¼Œä¸æŒ‡æœ›è¿™ä¸ªèµšé’±ï¼Œåˆ°åº—åå†è½¬åŒ–ã€‚";
    followup = "æ‚¨å‘¨è¾¹3å…¬é‡Œå†…ï¼Œç«äº‰å¯¹æ‰‹å¤šå—ï¼Ÿä»–ä»¬çš„å¼•æµå“ä»·æ ¼å¤§æ¦‚æ˜¯å¤šå°‘ï¼Ÿ";
  } else if (q.includes("è€å®¢") || q.includes("æµå¤±") || q.includes("ç»­è´¹")) {
    prefix = "è€ä¼šå‘˜æµå¤±çœŸçš„æ¯”å‰²è‚‰è¿˜ç–¼ï¼Œæˆ‘å¤ªç†è§£é‚£ç§æ„Ÿå—äº†ã€‚ğŸ’”";
    content = "å…³äºã€è€å®¢æ¿€æ´»ã€‘ï¼Œæ‚¨å¯ä»¥è¯•è¯•ï¼š\n1. å»ºç«‹æƒ…æ„Ÿè´¦æˆ·ï¼šä¸ä»…æ˜¯ä¸Šè¯¾ï¼Œè¿‡èŠ‚é€ä¸ªå°ç¤¼ç‰©ï¼Œå¹³æ—¶å‘ä¸ªå…»ç”Ÿå°è´´å£«ï¼Œè®©äººè§‰å¾—æ‚¨ä¸ä»…æ˜¯å•†å®¶ï¼Œæ›´æ˜¯æœ‹å‹ã€‚\n2. è€—å¡é¢„è­¦ï¼šç³»ç»Ÿè®¾ç½®ï¼Œå‰©ä¸‹3æ¬¡è¯¾æ—¶å¿…é¡»æé†’ï¼Œä¸è¦ç­‰å¡ç”¨å®Œäº†å†è”ç³»ï¼Œé‚£æ—¶å€™å°±æ™šäº†ã€‚\n3. å®šæœŸå›è®¿ï¼šæ¯3ä¸ªæœˆåšä¸€æ¬¡æ·±åº¦ä½“æµ‹ï¼Œè®©ä¼šå‘˜çœ‹åˆ°æ•°æ®çš„å˜åŒ–ï¼Œæ‰æœ‰ç»­è´¹çš„åŠ¨åŠ›ã€‚";
    followup = "æ‚¨åº—é‡Œç›®å‰çš„å¹³å‡è€—å¡å‘¨æœŸå¤§æ¦‚æ˜¯å¤šä¹…ï¼Ÿæ˜¯ä¸æ˜¯æœ‰å¾ˆå¤šåƒµå°¸å¡ï¼Ÿ";
  } else if (q.includes("ä»·æ ¼") || q.includes("å¤ªè´µ") || q.includes("å•ä»·")) {
    prefix = "å®¢æˆ·å«Œè´µæ˜¯æ­£å¸¸çš„ï¼Œè¯´æ˜æˆ‘ä»¬è¿˜æ²¡è®©å¥¹è§‰å¾—â€œç‰©è¶…æ‰€å€¼â€ã€‚ğŸ¤”";
    content = "å…³äºã€ä»·æ ¼è°ˆåˆ¤ã€‘ï¼Œæœ‰å‡ ä¸ªå°æŠ€å·§ï¼š\n1. æ‹†è§£æ³•ï¼šæŠŠå¹´å¡ä»·æ ¼é™¤ä»¥365å¤©ï¼Œå‘Šè¯‰å¥¹â€œæ¯å¤©åªè¦ä¸€æ¯å¥¶èŒ¶é’±â€ï¼Œç¬é—´è§‰å¾—ä¾¿å®œäº†ã€‚\n2. ä»·å€¼é”šå®šï¼šå…ˆä»‹ç»ä¸€ä¸ªæ›´è´µçš„ç§æ•™å¥—é¤ï¼Œå†æ¨è¿™å¼ å¡ï¼Œå¥¹ä¼šè§‰å¾—â€œå¥½åˆ’ç®—â€ã€‚\n3. ç—›è‹¦æ³•ï¼šé—®å¥¹â€œå¦‚æœä¸ç»ƒï¼Œå»åŒ»é™¢çœ‹é¢ˆæ¤è¦èŠ±å¤šå°‘é’±ï¼Ÿå—å¤šå°‘ç½ªï¼Ÿâ€";
    followup = "æ‚¨ç›®å‰çš„é”€å† åœ¨è°ˆå•æ—¶ï¼Œæœ€å¸¸ç”¨çš„æˆå•ç†ç”±æ˜¯ä»€ä¹ˆï¼Ÿ";
  } else {
    prefix = "è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ç»è¥é—®é¢˜ï¼Œè¯´æ˜æ‚¨åœ¨æ·±åº¦æ€è€ƒã€‚ğŸ‘";
    content = "ä½œä¸ºé¦†ä¸»ï¼Œæ ¸å¿ƒè¦å…³æ³¨ä¸‰ç‚¹ï¼š\n1. ç°é‡‘æµï¼ˆæ´»ä¸‹å»çš„æ ¹æœ¬ï¼‰\n2. è€—å¡ç‡ï¼ˆçœŸæ­£èµšåˆ°çš„é’±ï¼‰\n3. ä¼šå‘˜æ»¡æ„åº¦ï¼ˆæœªæ¥çš„é’±ï¼‰ã€‚\n\nå»ºè®®æ‚¨å…ˆæ¢³ç†ä¸€ä¸‹ç›®å‰çš„è´¢åŠ¡æ¨¡å‹ï¼Œçœ‹çœ‹å“ªä¸ªç¯èŠ‚æ˜¯çŸ­æ¿ï¼ˆæµé‡/è½¬åŒ–/å¤è´­ï¼‰ã€‚";
    followup = "æ‚¨è§‰å¾—ç›®å‰åº—é‡Œæœ€è®©æ‚¨ç¡ä¸ç€è§‰çš„ä¸€ä¸ªæŒ‡æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ";
  }

  return `${prefix}\n\n${content}\n\nğŸ‘‰ **${followup}**`;
};

export default function App() {
  const [province, setProvince] = useState('å¹¿ä¸œçœ');
  const [city, setCity] = useState('æ·±åœ³å¸‚');
  const [district, setDistrict] = useState('å—å±±åŒº');
  const [studioName, setStudioName] = useState('');
  const [phoneNumber, setPhoneNumber] = useState('');
  const [storeType, setStoreType] = useState('mall');
  const [targetRevenue, setTargetRevenue] = useState('100000');
  const [priceRange, setPriceRange] = useState('mid');
  const [selectedPainPoints, setSelectedPainPoints] = useState([]);
  const [memberTypes, setMemberTypes] = useState({ group: '100', smallGroup: '40', private: '20' });
  const [isGenerating, setIsGenerating] = useState(false);
  const [result, setResult] = useState(null);
  const [selectedDate, setSelectedDate] = useState(new Date());
  const [qaInput, setQaInput] = useState('');
  const [qaResponse, setQaResponse] = useState('');
  const [isQaLoading, setIsQaLoading] = useState(false);
  
  // Refine Loading States
  const [isDouyinLoading, setIsDouyinLoading] = useState(false);
  const [isXHSLoading, setIsXHSLoading] = useState(false);

  const qaSectionRef = useRef(null);

  const cities = useMemo(() => CHINA_REGIONS[province] ? Object.keys(CHINA_REGIONS[province]) : [], [province]);
  const districts = useMemo(() => (CHINA_REGIONS[province] && CHINA_REGIONS[province][city]) ? CHINA_REGIONS[province][city] : [], [province, city]);

  const handleProvinceChange = (e) => { setProvince(e.target.value); const fC = CHINA_REGIONS[e.target.value] ? Object.keys(CHINA_REGIONS[e.target.value])[0] : ''; setCity(fC); const fD = (CHINA_REGIONS[e.target.value] && CHINA_REGIONS[e.target.value][fC]) ? CHINA_REGIONS[e.target.value][fC][0] : ''; setDistrict(fD); };
  const handleCityChange = (e) => { setCity(e.target.value); const fD = (CHINA_REGIONS[province] && CHINA_REGIONS[province][e.target.value]) ? CHINA_REGIONS[province][e.target.value][0] : ''; setDistrict(fD); };
  const togglePainPoint = (point) => { if (selectedPainPoints.includes(point)) setSelectedPainPoints(prev => prev.filter(p => p !== point)); else setSelectedPainPoints(prev => [...prev, point]); };

  const handleGenerate = () => {
    if (!targetRevenue || selectedPainPoints.length === 0) { alert("è€æ¿ï¼Œè¯·å¡«å†™ä¸šç»©ç›®æ ‡å¹¶è‡³å°‘é€‰æ‹©ä¸€ä¸ªæ ¸å¿ƒç—›ç‚¹ï¼"); return; }
    setIsGenerating(true);
    setTimeout(() => {
      const target = parseInt(targetRevenue);
      const totalMembers = parseInt(memberTypes.group) + parseInt(memberTypes.smallGroup) + parseInt(memberTypes.private);
      const selectedPriceOption = PRICE_RANGE_OPTIONS.find(p => p.id === priceRange);
      let avgTicket = selectedPriceOption ? selectedPriceOption.avg : 3000;
      let closeRate = storeType === 'studio' ? 0.35 : 0.20;
      const neededSales = Math.ceil(target / avgTicket);
      const neededLeads = Math.ceil(target / (avgTicket * closeRate));
      const shortLoc = district || city;
      const shopName = studioName || 'å¼ºä¸­å¼ºç‘œä¼½';
      
      let theme = "å…¨åŸçƒ­ç»ƒ";
      let logic = "é€šè¿‡å¤šç»´åº¦è¥é”€ç»„åˆæ‹³ï¼Œæ‰“ç ´æµé‡ç“¶é¢ˆã€‚";
      if (selectedPainPoints.includes("ä¸¥é‡ç¼ºæ–°å®¢")) { theme = "ç ´å†°è¡ŒåŠ¨"; logic = "æ ¸å¿ƒç—›ç‚¹æ˜¯æµé‡ï¼Œé‡ç‚¹åœ¨äºé™ä½é—¨æ§›ï¼Œåˆ¶é€ çˆ†ç‚¹ã€‚"; }

      // ç”Ÿæˆå¡é¡¹çŸ©é˜µ (Upgrade to match image table structure)
      const cardsList = generateCardMatrix(storeType, priceRange, selectedPainPoints);
      const designLogic = "åŸºäºæ‚¨çš„åœºé¦†ç±»å‹å’Œå®šä»·åŒºé—´ï¼Œæˆ‘ä»¬è®¾è®¡äº†äº”ç»´ä¸€ä½“çš„å¡é¡¹ç»“æ„ï¼Œé‡ç‚¹å¼ºåŒ–ç§æ•™ä¸å°ç­è¯¾çš„ç»„åˆï¼Œæå‡å®¢å•ä»·ä¸å¤è´­ç‡ã€‚";

      // ç”Ÿæˆå†…å®¹ (åˆå§‹ - Template)
      const dailyContent = getDailyContent(storeType, shopName, shortLoc, selectedDate);
      const privateScripts = generatePrivateScripts(storeType, shopName, shortLoc);

      setResult({
        strategy: { theme, logic },
        cards: { designLogic, list: cardsList },
        math: { target, avgTicket, closeRate, neededLeads, comment: `âœ… æµ‹ç®—é€»è¾‘ï¼š${target} / (${avgTicket} x ${closeRate * 100}%) â‰ˆ ${neededLeads}äººã€‚\nåŸºäºã€${selectedPriceOption?.label}ã€‘å®¢å•ä»·ã€‚${totalMembers < 50 ? 'æ–°åº—æœŸå»ºè®®é‡å¼•æµã€‚' : 'ç¨³å®šæœŸå»ºè®®é‡è½¬ä»‹ç»ã€‚'}` },
        scripts: { moments: dailyContent.moments, private: privateScripts, sales: "...", douyin: dailyContent.douyinPost, xiaohongshu: dailyContent.xiaohongshuPost }
      });
      setIsGenerating(false);
    }, 1500);
  };

  useEffect(() => {
    if (result) {
      const shortLoc = district || city;
      const shopName = studioName || 'å¼ºä¸­å¼ºç‘œä¼½';
      const dailyContent = getDailyContent(storeType, shopName, shortLoc, selectedDate);
      
      setResult(prev => prev ? { 
        ...prev, 
        scripts: { 
          ...prev.scripts, 
          moments: dailyContent.moments,
          douyin: dailyContent.douyinPost, // Reset to template on date change
          xiaohongshu: dailyContent.xiaohongshuPost // Reset to template on date change
        } 
      } : null);
    }
  }, [selectedDate]);

  const changeDate = (days) => { const newDate = new Date(selectedDate); newDate.setDate(newDate.getDate() + days); setSelectedDate(newDate); };
  
  // AI Handler: Q&A
  const handleAskAI = async () => {
    if (!qaInput.trim()) return;
    setIsQaLoading(true);
    const context = {
      storeType,
      location: `${province}${city}${district}`,
      priceRange: PRICE_RANGE_OPTIONS.find(p => p.id === priceRange)?.label,
      painPoints: selectedPainPoints
    };
    // Default mock response for preview, can switch to API call if key is provided
    setTimeout(() => {
        setQaResponse(mockAiResponse(qaInput));
        setIsQaLoading(false);
    }, 1500);
  };

  const handleAIRewriteDouyin = async () => {
    // Mock AI rewrite for preview
    if (!result) return;
    setIsDouyinLoading(true);
    setTimeout(() => {
        setIsDouyinLoading(false);
        alert("AI é‡å†™åŠŸèƒ½éœ€é…ç½® API Keyã€‚ç›®å‰å±•ç¤ºçš„æ˜¯æ¨¡æ¿ç”Ÿæˆå†…å®¹ã€‚");
    }, 1000);
  };

  const handleAIRewriteXHS = async () => {
    // Mock AI rewrite for preview
    if (!result) return;
    setIsXHSLoading(true);
    setTimeout(() => {
        setIsXHSLoading(false);
        alert("AI é‡å†™åŠŸèƒ½éœ€é…ç½® API Keyã€‚ç›®å‰å±•ç¤ºçš„æ˜¯æ¨¡æ¿ç”Ÿæˆå†…å®¹ã€‚");
    }, 1000);
  };

  const handlePresetQuestion = (q) => { setQaInput(q); setIsQaLoading(true); setTimeout(() => { setQaResponse(mockAiResponse(q)); setIsQaLoading(false); }, 1500); };

  return (
    <div className="min-h-screen bg-slate-900 text-slate-100 font-sans selection:bg-orange-500 selection:text-white">
      <header className="bg-slate-800 border-b border-slate-700 sticky top-0 z-50">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
          <div className="flex items-center space-x-3">
            <img src="https://file.rendit.io/n/sF0QvGjW1s9xQ0jK6w8z.jpg" alt="å¼ºä¸­å¼ºAIä¸šç»©ç”Ÿæˆå™¨" className="w-10 h-10 rounded-lg" />
            <h1 className="text-xl font-bold tracking-tight text-white">å¼ºä¸­å¼ºAIä¸šç»©ç”Ÿæˆå™¨</h1>
          </div>
          <div className="text-xs font-medium bg-slate-700 px-3 py-1 rounded-full text-slate-300">AI é©±åŠ¨ Â· ç»“æœå¯¼å‘</div>
        </div>
      </header>

      <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="grid grid-cols-1 lg:grid-cols-12 gap-8">
          <div className="lg:col-span-4 space-y-6">
            <div className="bg-slate-800 rounded-2xl p-6 border border-slate-700 shadow-xl">
              <h2 className="text-lg font-semibold text-white mb-6 flex items-center"><Store className="w-5 h-5 mr-2 text-orange-500" />é—¨åº—åŸºç¡€ä¿¡æ¯</h2>
              <div className="space-y-5">
                <div className="grid grid-cols-1 gap-3">
                  <div><label className="block text-sm font-medium text-slate-400 mb-2 flex items-center"><Building2 className="w-4 h-4 mr-1 text-slate-500" />ç‘œä¼½é¦†åç§°</label><input type="text" value={studioName} onChange={(e) => setStudioName(e.target.value)} placeholder="ä¾‹å¦‚ï¼šå¼ºä¸­å¼ºç‘œä¼½" className="w-full bg-slate-900 border border-slate-600 rounded-lg py-2 px-3 text-white text-sm" /></div>
                  <div><label className="block text-sm font-medium text-slate-400 mb-2 flex items-center"><Phone className="w-4 h-4 mr-1 text-slate-500" />è”ç³»ç”µè¯</label><input type="tel" value={phoneNumber} onChange={(e) => setPhoneNumber(e.target.value)} placeholder="è€æ¿ç”µè¯" className="w-full bg-slate-900 border border-slate-600 rounded-lg py-2 px-3 text-white text-sm" /></div>
                </div>
                <div><label className="block text-sm font-medium text-slate-400 mb-2 flex items-center"><MapPin className="w-4 h-4 mr-1 text-slate-500" />æ‰€åœ¨åœ°åŒº</label><div className="grid grid-cols-1 gap-2"><select value={province} onChange={handleProvinceChange} className="w-full bg-slate-900 border border-slate-600 rounded-lg py-2 px-3 text-white text-sm">{Object.keys(CHINA_REGIONS).map(p => <option key={p} value={p}>{p}</option>)}</select><div className="grid grid-cols-2 gap-2"><select value={city} onChange={handleCityChange} disabled={!cities.length} className="w-full bg-slate-900 border border-slate-600 rounded-lg py-2 px-3 text-white text-sm">{cities.map(c => <option key={c} value={c}>{c}</option>)}</select><select value={district} onChange={(e) => setDistrict(e.target.value)} disabled={!districts.length} className="w-full bg-slate-900 border border-slate-600 rounded-lg py-2 px-3 text-white text-sm">{districts.map(d => <option key={d} value={d}>{d}</option>)}</select></div></div></div>
                <div><label className="block text-sm font-medium text-slate-400 mb-2">é—¨åº—ç±»å‹</label><div className="grid grid-cols-4 gap-2">{STORE_TYPE_OPTIONS.map((type) => (<button key={type.id} onClick={() => setStoreType(type.id)} className={`flex flex-col items-center justify-center py-3 px-1 rounded-xl border transition-all relative group h-20 ${storeType === type.id ? 'bg-orange-600 border-orange-500 text-white' : 'bg-slate-700/50 border-slate-600 text-slate-300'}`}><span className={`font-bold text-xs mb-1 text-center leading-tight ${storeType === type.id ? 'text-white' : 'text-slate-200'}`}>{type.label}</span><span className={`text-[10px] text-center transform scale-90 ${storeType === type.id ? 'text-orange-100' : 'text-slate-500'}`}>{type.desc}</span>{storeType === type.id && <CheckCircle className="w-3 h-3 text-white absolute top-1 right-1" />}</button>))}</div></div>
                <div><label className="block text-sm font-medium text-slate-400 mb-2 flex items-center"><Dumbbell className="w-4 h-4 mr-2 text-slate-500" />ä¼šå‘˜ç§ç±» (äºº)</label><div className="grid grid-cols-3 gap-2"><div className="bg-slate-900/50 border border-slate-700 rounded-lg p-2 text-center"><div className="text-xs text-slate-500 mb-1">å›¢è¯¾</div><input type="number" value={memberTypes.group} onChange={(e) => setMemberTypes({...memberTypes, group: e.target.value})} className="w-full bg-slate-800 border-slate-600 rounded px-1 py-1 text-center text-sm text-white" placeholder="0"/></div><div className="bg-slate-900/50 border border-slate-700 rounded-lg p-2 text-center"><div className="text-xs text-blue-400 mb-1">å°ç­è¯¾</div><input type="number" value={memberTypes.smallGroup} onChange={(e) => setMemberTypes({...memberTypes, smallGroup: e.target.value})} className="w-full bg-slate-800 border-slate-600 rounded px-1 py-1 text-center text-sm text-white" placeholder="0"/></div><div className="bg-slate-900/50 border border-slate-700 rounded-lg p-2 text-center"><div className="text-xs text-orange-400 mb-1">ç§æ•™</div><input type="number" value={memberTypes.private} onChange={(e) => setMemberTypes({...memberTypes, private: e.target.value})} className="w-full bg-slate-800 border-slate-600 rounded px-1 py-1 text-center text-sm text-white" placeholder="0"/></div></div></div>
                <div><label className="block text-sm font-medium text-slate-400 mb-2">æœ¬æœˆä¸šç»©ç›®æ ‡ (å…ƒ)</label><div className="relative"><Target className="absolute left-3 top-2.5 w-5 h-5 text-slate-500" /><input type="number" value={targetRevenue} onChange={(e) => setTargetRevenue(e.target.value)} className="w-full bg-slate-900 border border-slate-600 rounded-lg py-2 pl-10 pr-4 text-white font-mono" /></div></div>
                <div><label className="block text-sm font-medium text-slate-400 mb-2 flex items-center"><CreditCard className="w-4 h-4 mr-2 text-slate-500" />ä¸»è¦æˆäº¤å¡é¡¹ä»·æ ¼åŒºé—´</label><div className="relative"><select value={priceRange} onChange={(e) => setPriceRange(e.target.value)} className="w-full bg-slate-900 border border-slate-600 rounded-lg py-2 px-3 text-white text-sm appearance-none">{PRICE_RANGE_OPTIONS.map(opt => <option key={opt.id} value={opt.id}>{opt.label}</option>)}</select><ArrowRight className="absolute right-3 top-2.5 w-4 h-4 text-slate-500 pointer-events-none transform rotate-90" /></div></div>
                <div><label className="block text-sm font-medium text-slate-400 mb-2 flex items-center"><AlertTriangle className="w-4 h-4 mr-2 text-red-500" />ç›®å‰æœ€å¤§ç—›ç‚¹ (å¯å¤šé€‰)</label><div className="grid grid-cols-2 gap-2">{PAIN_POINTS_OPTIONS.map((point) => (<button key={point} onClick={() => togglePainPoint(point)} className={`text-xs py-2 px-1 rounded-md border transition-all ${selectedPainPoints.includes(point) ? 'bg-red-500/20 border-red-500 text-red-100' : 'bg-slate-800 border-slate-700 text-slate-400'}`}>{point}</button>))}</div></div>
                <button onClick={handleGenerate} disabled={isGenerating} className={`w-full py-4 rounded-xl text-white font-bold text-lg shadow-lg flex items-center justify-center transition-all ${isGenerating ? 'bg-slate-600' : 'bg-gradient-to-r from-orange-500 to-red-600'}`}>{isGenerating ? "æ­£åœ¨æ¨æ¼”ç­–ç•¥..." : ( <><Sparkles className="w-5 h-5 mr-2" />ä¸€é”®ç”Ÿæˆèµšé’±æ–¹æ¡ˆ</>)}</button>
              </div>
            </div>
          </div>

          <div className="lg:col-span-8 space-y-6">
            {!result ? (
              <div className="h-full min-h-[400px] flex flex-col items-center justify-center bg-slate-800/50 border border-dashed border-slate-700 rounded-2xl p-8 text-center"><div className="bg-slate-800 p-4 rounded-full mb-4"><Calculator className="w-12 h-12 text-slate-600" /></div><h3 className="text-xl font-medium text-slate-300 mb-2">ç­‰å¾…æ•°æ®è¾“å…¥</h3><p className="text-slate-500 max-w-sm">è¯·åœ¨å·¦ä¾§è¾“å…¥æ‚¨çš„é—¨åº—æƒ…å†µï¼Œå¼ºä¸­å¼ºæ™ºèƒ½å¤§è„‘å°†ä¸ºæ‚¨ç”Ÿæˆå…¨å¥—è½åœ°æ‰§è¡Œæ–¹æ¡ˆã€‚</p></div>
            ) : (
              <>
                <div className="bg-slate-800 rounded-2xl border border-slate-700 overflow-hidden shadow-xl animate-fade-in-up">
                  <div className="bg-slate-900/50 px-6 py-4 border-b border-slate-700 flex justify-between items-center"><h3 className="text-lg font-bold text-orange-500 flex items-center"><span className="bg-orange-500/10 p-1.5 rounded mr-2">ğŸ¯</span>æ´»åŠ¨é¡¶å±‚è®¾è®¡</h3><div className="text-xs text-slate-500 bg-slate-800 px-2 py-1 rounded border border-slate-700">{province === city ? city : province + city} {district} Â· {STORE_TYPE_OPTIONS.find(t => t.id === storeType)?.label}</div></div>
                  <div className="p-6"><div className="mb-4"><span className="text-xs font-bold text-slate-500 uppercase tracking-wider">Activity Theme</span><h4 className="text-2xl font-bold text-white mt-1">{result.strategy.theme}</h4></div><div className="bg-slate-700/30 p-4 rounded-xl border border-slate-700"><span className="text-xs font-bold text-orange-400 uppercase tracking-wider block mb-2">åº•å±‚é€»è¾‘</span><p className="text-slate-300 leading-relaxed">{result.strategy.logic}</p></div></div>
                </div>

                <div className="bg-slate-800 rounded-2xl border border-slate-700 p-6 shadow-xl animate-fade-in-up">
                  <h3 className="text-lg font-bold text-white mb-4 flex items-center"><CheckCircle className="w-5 h-5 mr-2 text-blue-500" />æ¨èå¡é¡¹è®¾è®¡ (AI å®šåˆ¶)</h3>
                  <div className="bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 mb-6 text-xs text-blue-200 leading-relaxed whitespace-pre-wrap"><span className="font-bold text-blue-400">ğŸ’¡ è®¾è®¡æ€è·¯ï¼š</span>{result.cards.designLogic}</div>
                  
                  <div className="overflow-x-auto">
                    <table className="w-full text-left border-collapse min-w-[800px]">
                      <thead>
                        <tr className="border-b border-slate-700">
                          <th className="p-3 text-xs font-bold text-slate-400 uppercase tracking-wider">å¡ç±»å‹</th>
                          <th className="p-3 text-xs font-bold text-slate-400 uppercase tracking-wider">å¡åç¤ºä¾‹</th>
                          <th className="p-3 text-xs font-bold text-slate-400 uppercase tracking-wider">å†…å®¹é…ç½®</th>
                          <th className="p-3 text-xs font-bold text-slate-400 uppercase tracking-wider">å»ºè®®å”®ä»·åŒºé—´</th>
                          <th className="p-3 text-xs font-bold text-slate-400 uppercase tracking-wider">å•èŠ‚æŠ˜ç®—(å‚è€ƒ)</th>
                          <th className="p-3 text-xs font-bold text-slate-400 uppercase tracking-wider">é€‚ç”¨å®¢æˆ·</th>
                          <th className="p-3 text-xs font-bold text-slate-400 uppercase tracking-wider">å®šä½è¯´æ˜</th>
                        </tr>
                      </thead>
                      <tbody className="divide-y divide-slate-700">
                        {result.cards.list.map((card, idx) => (
                          <tr key={idx} className="hover:bg-slate-700/30 transition-colors">
                            <td className="p-3 align-top"><span className="inline-block px-2 py-1 rounded text-xs font-bold bg-slate-700 text-slate-300">{card.type}</span></td>
                            <td className="p-3 align-top font-bold text-white text-sm">{card.name}</td>
                            <td className="p-3 align-top text-sm text-slate-300">{card.content}</td>
                            <td className="p-3 align-top"><div className="font-bold text-orange-400">{card.priceRange}</div></td>
                            <td className="p-3 align-top text-sm text-slate-300 font-mono">{card.unitPrice}</td>
                            <td className="p-3 align-top text-sm text-slate-300">{card.targetUser}</td>
                            <td className="p-3 align-top text-xs text-slate-400 leading-tight">{card.position}</td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                </div>

                {/* ä¸šç»©åæ¨ (Formula Style) */}
                <div className="bg-slate-800 rounded-2xl border border-slate-700 p-6 shadow-xl relative overflow-hidden group animate-fade-in-up">
                  <div className="absolute top-0 right-0 p-4 opacity-10"><Calculator className="w-24 h-24 text-white" /></div>
                  <h3 className="text-lg font-bold text-white mb-6 flex items-center"><Calculator className="w-5 h-5 mr-2 text-green-500" />ä¸šç»©åæ¨æ¼æ–—</h3>
                  <div className="flex items-center justify-between text-center mb-6 text-sm relative z-10">
                    <div className="flex-1"><div className="text-slate-400 mb-1">æ‰€éœ€è¿›åº—æµé‡</div><div className="text-xl font-bold text-blue-400">{result.math.neededLeads}<span className="text-xs text-slate-500 ml-1">äºº</span></div></div>
                    <div className="text-slate-600 font-bold text-lg">Ã—</div>
                    <div className="flex-1"><div className="text-slate-400 mb-1">å¹³å‡å®¢å•ä»·</div><div className="text-xl font-bold text-orange-400">Â¥{result.math.avgTicket}</div></div>
                    <div className="text-slate-600 font-bold text-lg">Ã—</div>
                    <div className="flex-1"><div className="text-slate-400 mb-1">é¢„ä¼°è´­ä¹°ç‡</div><div className="text-xl font-bold text-purple-400">{result.math.closeRate * 100}%</div></div>
                    <div className="text-slate-600 font-bold text-lg">=</div>
                    <div className="flex-1 bg-slate-700/50 rounded-lg py-2 border border-slate-600"><div className="text-slate-300 mb-1">ç›®æ ‡ä¸šç»©</div><div className="text-xl font-bold text-white">Â¥{result.math.target.toLocaleString()}</div></div>
                  </div>
                  <div className="bg-slate-900/50 p-3 rounded-lg text-xs text-slate-400 whitespace-pre-line">{result.math.comment}</div>
                </div>

                {/* å…¨åŸŸæµé‡æ—¥å† */}
                <div className="bg-slate-800 rounded-2xl border border-slate-700 overflow-hidden shadow-xl animate-fade-in-up">
                  <div className="bg-slate-900/50 px-6 py-4 border-b border-slate-700 flex justify-between items-center">
                    <h3 className="text-lg font-bold text-green-500 flex items-center"><Share2 className="w-5 h-5 mr-2" />å…¨åŸŸæµé‡æ—¥å† (æ¯æ—¥æ›´æ–°)</h3>
                    <div className="flex items-center space-x-2 bg-slate-800 rounded-lg p-1 border border-slate-600"><button onClick={() => changeDate(-1)} className="p-1 hover:bg-slate-700 rounded"><ChevronLeft className="w-4 h-4 text-slate-400" /></button><div className="flex items-center px-2 text-sm font-mono text-white min-w-[100px] justify-center"><Calendar className="w-3 h-3 mr-2 text-green-500" />{selectedDate.getMonth() + 1}æœˆ{selectedDate.getDate()}æ—¥</div><button onClick={() => changeDate(1)} className="p-1 hover:bg-slate-700 rounded"><ChevronRight className="w-4 h-4 text-slate-400" /></button></div>
                  </div>
                  <div className="p-6 space-y-8">
                    {/* æœ‹å‹åœˆ */}
                    <div>
                      <h4 className="text-sm font-bold text-slate-400 mb-4 uppercase tracking-wider flex items-center"><MessageCircle className="w-4 h-4 mr-2" />æœ‹å‹åœˆè·Ÿå• (3æ¡/æ—¥)</h4>
                      <div className="space-y-6">
                        {result.scripts.moments.map((moment, index) => { const Icon = moment.icon; return (
                          <div key={index} className="relative pl-8 border-l-2 border-slate-700 last:border-0 pb-2">
                            <div className="absolute -left-[9px] top-0 bg-slate-800 border border-slate-600 p-1 rounded-full"><Icon className={`w-4 h-4 ${index === 0 ? 'text-orange-400' : index === 1 ? 'text-yellow-400' : 'text-blue-400'}`} /></div>
                            <div className="mb-1 flex items-center"><span className="text-xs font-bold bg-slate-700 text-slate-300 px-2 py-0.5 rounded mr-2">{moment.time}</span><span className="text-sm font-bold text-white">{moment.title}</span></div>
                            <div className="grid grid-cols-1 md:grid-cols-5 gap-4 mt-3">
                              <div className="md:col-span-3 bg-slate-900/80 rounded-lg p-4 border border-slate-700 font-mono text-sm text-slate-300 whitespace-pre-line relative group">{moment.content}<button onClick={() => navigator.clipboard.writeText(moment.content)} className="absolute top-2 right-2 p-1.5 bg-slate-800 rounded hover:bg-slate-700 text-slate-400 hover:text-white transition-colors opacity-0 group-hover:opacity-100"><Copy className="w-3 h-3" /></button></div>
                              <div className="md:col-span-2 bg-slate-700/30 rounded-lg border border-dashed border-slate-600 flex flex-col items-center justify-center p-4 text-center"><ImageIcon className="w-5 h-5 text-slate-500 mb-2" /><p className="text-xs text-slate-500 leading-tight px-2">{moment.imageDesc}</p></div>
                            </div>
                          </div>
                        )})}
                      </div>
                    </div>

                    {/* æŠ–éŸ³ */}
                    <div className="pt-6 border-t border-slate-700">
                      <h4 className="text-sm font-bold text-slate-400 mb-4 uppercase tracking-wider flex items-center"><Video className="w-4 h-4 mr-2" />æŠ–éŸ³çŸ­è§†é¢‘ (1æ¡/æ—¥)</h4>
                      <div className="bg-slate-900 rounded-xl border border-slate-700 p-5 relative">
                        <div className="flex justify-between items-start mb-4"><div><span className="inline-block bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs px-2 py-1 rounded font-bold mb-2">ä»Šæ—¥æ¨è</span><h5 className="text-lg font-bold text-white">{result.scripts.douyin.title}</h5></div>
                        <div className="flex space-x-2">
                          <button onClick={handleAIRewriteDouyin} disabled={isDouyinLoading} className="p-2 hover:bg-slate-800 rounded-lg text-purple-400 hover:text-purple-200 border border-purple-500/30 flex items-center gap-1 text-xs transition-all">{isDouyinLoading ? <Loader2 className="w-4 h-4 animate-spin"/> : <><Sparkles className="w-3 h-3" /> AIç”Ÿæˆæ–°åˆ›æ„</>}</button>
                          <button onClick={() => navigator.clipboard.writeText(result.scripts.douyin.content)} className="p-2 hover:bg-slate-800 rounded-lg text-slate-400 hover:text-white"><Copy className="w-4 h-4" /></button>
                        </div>
                        </div>
                        <div className="bg-slate-800/50 p-4 rounded-lg mb-4 text-sm text-slate-300 whitespace-pre-line border border-slate-700/50">{result.scripts.douyin.content}</div>
                        <div className="mb-4 flex items-center text-xs text-slate-400 bg-slate-800 px-3 py-2 rounded border border-slate-700"><Music className="w-3 h-3 mr-2 text-purple-400" />æ¨èBGMï¼š<span className="text-purple-300 ml-1">{result.scripts.douyin.bgm || "æš‚æ— æ¨è"}</span></div>
                        <div className="space-y-2">{result.scripts.douyin.script.map((s, i) => (<div key={i} className="flex text-xs border-l-2 border-slate-600 pl-3 py-1"><span className="text-slate-400 font-mono w-12 shrink-0">{s.scene}</span><div className="text-slate-300"><span className="text-orange-400 font-bold">ç”»é¢ï¼š</span>{s.visual} <span className="text-blue-400 font-bold ml-1">å£°éŸ³ï¼š</span>{s.audio}</div></div>))}</div>
                      </div>
                    </div>

                    {/* å°çº¢ä¹¦ */}
                    <div className="pt-6 border-t border-slate-700">
                      <h4 className="text-sm font-bold text-slate-400 mb-4 uppercase tracking-wider flex items-center"><Camera className="w-4 h-4 mr-2" />å°çº¢ä¹¦ç¬”è®° (1æ¡/æ—¥)</h4>
                      <div className="bg-slate-900 rounded-xl border border-slate-700 p-5 relative">
                        <div className="flex justify-between items-start mb-4"><div><span className="inline-block bg-red-500 text-white text-xs px-2 py-1 rounded font-bold mb-2">çˆ†æ¬¾ç¬”è®°</span><h5 className="text-lg font-bold text-white">{result.scripts.xiaohongshu.title}</h5></div>
                        <div className="flex space-x-2">
                          <button onClick={handleAIRewriteXHS} disabled={isXHSLoading} className="p-2 hover:bg-slate-800 rounded-lg text-red-400 hover:text-red-200 border border-red-500/30 flex items-center gap-1 text-xs transition-all">{isXHSLoading ? <Loader2 className="w-4 h-4 animate-spin"/> : <><Sparkles className="w-3 h-3" /> AIç”Ÿæˆæ–°åˆ›æ„</>}</button>
                          <button onClick={() => navigator.clipboard.writeText(result.scripts.xiaohongshu.content)} className="p-2 hover:bg-slate-800 rounded-lg text-slate-400 hover:text-white"><Copy className="w-4 h-4" /></button>
                        </div>
                        </div>
                        <div className="bg-slate-800/50 p-4 rounded-lg mb-4 text-sm text-slate-300 whitespace-pre-line border border-slate-700/50">{result.scripts.xiaohongshu.content}</div>
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-2">{result.scripts.xiaohongshu.images.map((img, i) => (<div key={i} className="bg-slate-800 p-2 rounded text-center border border-slate-700"><span className="text-[10px] text-slate-500 block mb-1">{img.label}</span><p className="text-xs text-slate-300 leading-tight">{img.desc}</p></div>))}</div>
                      </div>
                    </div>
                  </div>
                </div>

                <div className="bg-slate-800 rounded-2xl border border-slate-700 overflow-hidden shadow-xl animate-fade-in-up">
                  <div className="bg-slate-900/50 px-6 py-4 border-b border-slate-700"><h3 className="text-lg font-bold text-purple-500 flex items-center"><MessageCircle className="w-5 h-5 mr-2" />ç§åŸŸç²¾å‡†è¯æœ¯ (å››ç±»å®¢ç¾¤)</h3></div>
                  <div className="divide-y divide-slate-700">
                    <ScriptRow label="ğŸ’€ æ­»å®¢å”¤é†’" color="text-slate-400" content={result.scripts.private.dead} icon={<UserX className="w-4 h-4" />} />
                    <ScriptRow label="âš¡ å‘†å®¢æ¿€æ´»" color="text-orange-400" content={result.scripts.private.dormant} icon={<Zap className="w-4 h-4" />} />
                    <ScriptRow label="ğŸŒ± æ½œå®¢èƒŒä¹¦" color="text-blue-400" content={result.scripts.private.potential} icon={<HelpCircle className="w-4 h-4" />} />
                    <ScriptRow label="ğŸ”¥ æ´»è·ƒè£‚å˜" color="text-green-400" content={result.scripts.private.active} icon={<UsersRound className="w-4 h-4" />} />
                  </div>
                </div>

                {/* AI é—®ç­”é¡¾é—® */}
                <div ref={qaSectionRef} className="bg-slate-800 rounded-2xl border border-slate-700 overflow-hidden shadow-xl animate-fade-in-up">
                  <div className="bg-slate-900/50 px-6 py-4 border-b border-slate-700 flex justify-between items-center"><h3 className="text-lg font-bold text-blue-400 flex items-center"><Bot className="w-5 h-5 mr-2" />å¼ºä¸­å¼ºÂ·AI è¿è¥é¡¾é—®</h3></div>
                  <div className="p-6">
                    {/* é¢„è®¾é—®é¢˜æ ‡ç­¾ */}
                    <div className="flex flex-wrap gap-2 mb-4">
                      {PRESET_QA_TAGS.map((tag, i) => (
                        <button key={i} onClick={() => handlePresetQuestion(tag)} className="text-xs bg-slate-700 hover:bg-blue-600/30 hover:text-blue-200 text-slate-300 px-3 py-1.5 rounded-full transition-colors border border-slate-600">{tag}</button>
                      ))}
                    </div>
                    {qaResponse && (<div className="mb-4 bg-slate-700/50 rounded-lg p-4 border border-slate-600 animate-fade-in-up"><div className="flex items-start mb-2"><div className="bg-blue-500/20 p-1 rounded mr-2"><Sparkles className="w-4 h-4 text-blue-400" /></div><span className="text-sm font-bold text-blue-100">AI å»ºè®®æ–¹æ¡ˆï¼š</span></div><div className="text-sm text-slate-300 font-mono whitespace-pre-line pl-8 leading-relaxed">{qaResponse}</div></div>)}
                    <div className="relative"><textarea value={qaInput} onChange={(e) => setQaInput(e.target.value)} placeholder="åœ¨æ­¤è¾“å…¥æ‚¨çš„ç»è¥éš¾é¢˜ï¼ˆä¾‹å¦‚ï¼šæœ€è¿‘ä½“éªŒè¯¾è½¬åŒ–ç‡å¾ˆä½æ€ä¹ˆåŠï¼Ÿï¼‰..." className="w-full bg-slate-900 border border-slate-600 rounded-xl py-3 pl-4 pr-12 text-white focus:ring-2 focus:ring-blue-500 outline-none resize-none h-24 text-sm" /><button onClick={handleAskAI} disabled={isQaLoading || !qaInput.trim()} className={`absolute bottom-3 right-3 p-2 rounded-lg transition-colors ${isQaLoading || !qaInput.trim() ? 'bg-slate-700 text-slate-500 cursor-not-allowed' : 'bg-blue-600 hover:bg-blue-500 text-white shadow-lg'}`}>{isQaLoading ? <div className="animate-spin rounded-full h-4 w-4 border-2 border-white/30 border-t-white"></div> : <Send className="w-4 h-4" />}</button></div>
                  </div>
                </div>
              </>
            )}
          </div>
        </div>
      </main>
    </div>
  );
}

function ScriptRow({ label, color, content, icon }) {
  const [copied, setCopied] = useState(false);
  const handleCopy = () => { navigator.clipboard.writeText(content); setCopied(true); setTimeout(() => setCopied(false), 2000); };
  return (
    <div className="p-6 hover:bg-slate-700/20 transition-colors">
      <div className="flex justify-between items-center mb-3"><h4 className={`text-sm font-bold flex items-center ${color}`}>{icon}<span className="ml-2">{label}</span></h4><button onClick={handleCopy} className="text-xs flex items-center bg-slate-700 hover:bg-slate-600 text-slate-300 px-2 py-1 rounded transition-colors">{copied ? <><CheckCircle className="w-3 h-3 mr-1 text-green-500" />å·²å¤åˆ¶</> : <><Copy className="w-3 h-3 mr-1" />å¤åˆ¶</>}</button></div><div className="bg-slate-900 rounded-lg p-4 border border-slate-700 font-mono text-sm text-slate-300 whitespace-pre-line leading-relaxed">{content}</div>
    </div>
  );
}